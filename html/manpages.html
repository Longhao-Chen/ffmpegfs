<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>ffmpegfs</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="ffmpegfs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="refentry"><a name="idm1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ffmpegfs &#8212; mounts and transcodes a multitude of formats to one of the target formats on the fly.</p></div><div class="refsynopsisdiv"><a name="_synopsis"></a><h2>Synopsis</h2><p><span class="strong"><strong>ffmpegfs</strong></span> [<span class="emphasis"><em>OPTION</em></span>]&#8230; <span class="emphasis"><em>IN_DIR</em></span> <span class="emphasis"><em>OUT_DIR</em></span></p></div><div class="refsect1"><a name="_description"></a><h2>DESCRIPTION</h2><p>The ffmpegfs(1) command will mount the directory <span class="emphasis"><em>IN_DIR</em></span> on <span class="emphasis"><em>OUT_DIR</em></span>.
Thereafter, accessing <span class="emphasis"><em>OUT_DIR</em></span> will show the contents of <span class="emphasis"><em>IN_DIR</em></span>, with all supported media files transparently renamed and transcoded to one of the supported target formats upon access.</p><p>Supported output formats:</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Format</strong></span></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Description</strong></span></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Audio</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Video</strong></span></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AIFF</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Audio Interchange File Format</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>PCM 16 bit BE</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>ALAC</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Apple Lossless Audio Codec</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>ALAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>FLAC</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Free Lossless Audio</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>FLAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>HLS</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>HTTP Live Streaming</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>H264</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MOV</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>QuickTime File Format</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>H264</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MP3</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MPEG-2 Audio Layer III</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MP3</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MP4</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MPEG-4</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>H264</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>OGG</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Theora</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Vorbis</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MKV</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Matroska</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>H264</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Opus</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Opus</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>ProRes</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Apple ProRes</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>ProRes</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>PCM 16 bit LE</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>TS</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MPEG Transport Stream</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>H264</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>AAC</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>WAV</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Waveform Audio File Format</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>PCM 16 bit LE</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>WebM</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>VP9</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Opus</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>BMP</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Video to frameset</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>BMP</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>JPG</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Video to frameset</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>JPEG</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>PNG</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Video to frameset</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p></p></td><td style="" align="left" valign="top"><p>PNG</p></td></tr></tbody></table></div></div><div class="refsect1"><a name="_options"></a><h2>OPTIONS</h2><p>Usage: ffmpegfs [OPTION]&#8230; IN_DIR OUT_DIR</p><p>Mount IN_DIR on OUT_DIR, converting audio and video files upon access.</p><div class="refsect2"><a name="_encoding_options"></a><h3>Encoding options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--desttype</strong></span>=TYPE, <span class="strong"><strong>-odesttype</strong></span>=TYPE
</span></dt><dd><p class="simpara">
Select the destination format. <span class="emphasis"><em>TYPE</em></span> can currently be:
</p><p class="simpara"><span class="strong"><strong>AIFF</strong></span>, <span class="strong"><strong>ALAC</strong></span>, <span class="strong"><strong>BMP</strong></span>, <span class="strong"><strong>FLAC</strong></span>, <span class="strong"><strong>HLS</strong></span>, <span class="strong"><strong>JPG</strong></span>, <span class="strong"><strong>MOV</strong></span>, <span class="strong"><strong>MP3</strong></span>, <span class="strong"><strong>MP4</strong></span>, <span class="strong"><strong>MKV</strong></span>, <span class="strong"><strong>OGG</strong></span>, <span class="strong"><strong>Opus</strong></span>, <span class="strong"><strong>PNG</strong></span>, <span class="strong"><strong>ProRes</strong></span>, <span class="strong"><strong>TS</strong></span>, <span class="strong"><strong>WAV</strong></span>, <span class="strong"><strong>WebM</strong></span>.</p><p class="simpara">To stream videos, <span class="strong"><strong>MP4</strong></span>, <span class="strong"><strong>TS</strong></span>, <span class="strong"><strong>HLS</strong></span>, <span class="strong"><strong>OGG</strong></span>, <span class="strong"><strong>WEBM</strong></span>, <span class="strong"><strong>MKV</strong></span>, or <span class="strong"><strong>MOV</strong></span>/<span class="strong"><strong>PRORES</strong></span> must be selected.</p><p class="simpara">To use HTTP Live Streaming, set <span class="strong"><strong>HLS</strong></span>.</p><p class="simpara">When a destination <span class="strong"><strong>JPG</strong></span>, <span class="strong"><strong>PNG</strong></span>, or <span class="strong"><strong>BMP</strong></span> is chosen, all frames of a video source file will be presented in a virtual directory named after the source file. Audio will not be available.</p><p class="simpara">To use the smart transcoding feature, specify a video and audio file type, separated by a "+" sign. For example, --desttype=mov+aiff will convert video files to Apple Quicktime MOV and audio-only files to AIFF.</p><p class="simpara">Defaults to: <span class="strong"><strong>mp4</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--audiocodec</strong></span>=TYPE, <span class="strong"><strong>-oaudiocodec</strong></span>=TYPE
</span></dt><dd><p class="simpara">
Select an audio codec. <span class="emphasis"><em>TYPE</em></span> depends on the destination format and can currently be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Formats</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Audio Codecs</strong></span></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MP4</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>AAC</strong></span>, MP3</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>WebM</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>OPUS</strong></span>, VORBIS</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MOV</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>AAC</strong></span>, AC3, MP3</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MKV</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>AAC</strong></span>, AC3, MP3</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>TS, HLS</p></td><td style="" align="left" valign="top"><p><span class="strong"><strong>AAC</strong></span>, AC3, MP3</p></td></tr></tbody></table></div><p class="simpara">Other destination formats do not support other codecs than the default.</p><p class="simpara">Defaults to: The destination format&#8217;s default setting, as indicated by the first codec name in the list.</p></dd><dt><span class="term">
<span class="strong"><strong>--videocodec</strong></span>=TYPE, <span class="strong"><strong>-ovideocodec</strong></span>=TYPE
</span></dt><dd><p class="simpara">
Select a video codec. <span class="emphasis"><em>TYPE</em></span> depends on the destination format and can currently be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Formats</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Video Codecs</strong></span></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MP4</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>H264</strong></span>, H265, MPEG1, MPEG2</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>WebM</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>VP9</strong></span>, VP8, AV1</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MOV</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>H264</strong></span>, H265, MPEG1, MPEG2</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>MKV</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>H264</strong></span>, H265, MPEG1, MPEG2</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>TS, HLS</p></td><td style="" align="left" valign="top"><p><span class="strong"><strong>H264</strong></span>, H265, MPEG1, MPEG2</p></td></tr></tbody></table></div><p class="simpara">Other destination formats do not support other codecs than the default.</p><p class="simpara">Defaults to: The destination format&#8217;s default setting, as indicated by the first codec name in the list.</p></dd><dt><span class="term">
<span class="strong"><strong>--autocopy</strong></span>=OPTION, <span class="strong"><strong>-oautocopy</strong></span>=OPTION
</span></dt><dd><p class="simpara">
Select the auto copy option. <span class="emphasis"><em>OPTION</em></span> can be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>OFF</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Never copy streams, transcode always.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>MATCH</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Copy stream if target supports codec.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>MATCHLIMIT</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Same as MATCH, only copy if target not larger, transcode otherwise.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>STRICT</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Copy stream if codec matches desired target, transcode otherwise.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>STRICTLIMIT</strong></span></p></td><td style="" align="left" valign="top"><p>Same as STRICT, only copy if target not larger, transcode otherwise.</p></td></tr></tbody></table></div><p class="simpara">This can speed up transcoding significantly as copying streams uses much less computing power as compared to transcoding.</p><p class="simpara"><span class="strong"><strong>MATCH</strong></span> copies a stream if the target supports it, e.g., an AAC audio stream will be copied to MPEG, although FFmpeg&#8217;s target format is MP3 for this container. H264 would be copied to ProRes, although the result would be a regular MOV or MP4, not a ProRes file.</p><p class="simpara"><span class="strong"><strong>STRICT</strong></span> would convert AAC to MP3 for MPEG or H264 to ProRes for Prores files to strictly adhere to the output format setting. This will create homogenous results which might prevent problems with picky playback software.</p><p class="simpara">Defaults to: <span class="strong"><strong>OFF</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--recodesame</strong></span>=OPTION, <span class="strong"><strong>-orecodesame</strong></span>=OPTION
</span></dt><dd><p class="simpara">
Select recode to the same format option, <span class="emphasis"><em>OPTION</em></span> can be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>NO</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Never recode to the same format.</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>YES</strong></span></p></td><td style="" align="left" valign="top"><p>Always recode to the same format.</p></td></tr></tbody></table></div><p class="simpara">Defaults to: <span class="strong"><strong>NO</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--profile</strong></span>=NAME, <span class="strong"><strong>-oprofile</strong></span>=NAME
</span></dt><dd><p class="simpara">
Set profile for target audience, <span class="emphasis"><em>NAME</em></span> can be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>NONE</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>no profile</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>FF</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>optimise for Firefox</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>EDGE</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>optimise for MS Edge and Internet Explorer &gt; 11</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>IE</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>optimise for MS Edge and Internet Explorer &#8656; 11</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>CHROME</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Google Chrome</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>SAFARI</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Apple Safari</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>OPERA</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Opera</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>MAXTHON</strong></span></p></td><td style="" align="left" valign="top"><p>Maxthon</p></td></tr></tbody></table></div><p class="simpara"><span class="strong"><strong>Note:</strong></span> applies to the MP4 output format only, and is ignored for all other formats.</p><p class="simpara">Defaults to: <span class="strong"><strong>NONE</strong></span></p></dd><dt><span class="term">
--<span class="strong"><strong>level</strong></span>=NAME, -o <span class="strong"><strong>level</strong></span>=NAME
</span></dt><dd><p class="simpara">
Set level for output if available. <span class="emphasis"><em>NAME</em></span> can be:
</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>PROXY</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Proxy &#8211; apco</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>LT</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>LT &#8211; apcs</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>STANDARD</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>standard &#8211; apcn</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>HQ</strong></span></p></td><td style="" align="left" valign="top"><p>HQ - apch</p></td></tr></tbody></table></div><p class="simpara"><span class="strong"><strong>Note:</strong></span> applies to the MP4 output format only, and is ignored for all other formats.</p><p class="simpara">Defaults to: <span class="strong"><strong>HQ</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--extensions</strong></span>=LIST, <span class="strong"><strong>-oextensions</strong></span>=LIST
</span></dt><dd><p class="simpara">
Set a list of extra file extensions recognised as input files. <span class="emphasis"><em>LIST</em></span> can contain one or more entries, separated by commas.
</p><p class="simpara">Example: --extensions=xxx,abc,yxz,aaa</p><p class="simpara">Set a list of extra file extensions recognised as input files. <span class="emphasis"><em>LIST</em></span> can contain one or more entries, separated by commas.Take care to select extensions that can actually be converted. Specifying something like --extensions=txt would make FFmpegfs attempt to transcode text files, resulting in error messages, making these files inaccessible.</p><p class="simpara">Defaults to: Use the default set as defined by FFmpeg.</p></dd><dt><span class="term">
<span class="strong"><strong>--hide_extensions</strong></span>=LIST, <span class="strong"><strong>-ohide_extensions</strong></span>=LIST
</span></dt><dd><p class="simpara">
Set a list of file extensions that should be hidden from the output. <span class="emphasis"><em>LIST</em></span> can contain one or more entries, separated by commas.
</p><p class="simpara">Example: --hide_extensions=jpg,png,cue to stop covers and cue sheets from showing up.</p><p class="simpara">Defaults to: Show all files.</p></dd></dl></div></div><div class="refsect2"><a name="_audio_options"></a><h3>Audio Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--audiobitrate</strong></span>=BITRATE, <span class="strong"><strong>-o audiobitrate</strong></span>=BITRATE
</span></dt><dd><p class="simpara">
Select the audio encoding bitrate.
</p><p class="simpara">Defaults to: <span class="strong"><strong>128 kbit</strong></span></p><p class="simpara"><span class="strong"><strong>Acceptable values for <span class="emphasis"><em>BITRATE</em></span>:</strong></span></p><p class="simpara"><span class="strong"><strong>mp4:</strong></span> 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 288, 320, 352, 384, 416, and 448 kbps.</p><p class="simpara"><span class="strong"><strong>mp3:</strong></span> For sampling frequencies of 32, 44.1, and 48 kHz, <span class="emphasis"><em>BITRATE</em></span> can be among 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, and 320 kbps.</p><p class="simpara">For sampling frequencies of 16, 22.05, and 24 kHz, <span class="emphasis"><em>BITRATE</em></span> can be among 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, and 160 kbps.</p><p class="simpara">When in doubt, it is recommended to choose a bitrate among 96, 112, 128, 160, 192, 224, 256, and 320 kbps.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>BITRATE</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
n bit/s:  #  or #bps
</li><li class="listitem">
n kbit/s: #K or #Kbps
</li><li class="listitem">
n Mbit/s: #M or #Mbps
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>--audiosamplerate</strong></span>=SAMPLERATE, <span class="strong"><strong>-o audiosamplerate</strong></span>=SAMPLERATE
</span></dt><dd><p class="simpara">
This limits the output sample rate to <span class="emphasis"><em>SAMPLERATE</em></span>. If the source file sample rate is higher, it will be downsampled automatically.
</p><p class="simpara">Typical values are 8000, 11025, 22050, 44100, 48000, 96000, and 192000.</p><p class="simpara">If the target codec does not support the selected sample rate, the next matching rate will be chosen (e.g. if 24K is selected but only 22.05 or 44.1 KHz is supported, 22.05 KHz will be set).</p><p class="simpara">Set to 0 to keep the source rate.</p><p class="simpara">Defaults to: <span class="strong"><strong>44.1 kHz</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>SAMPLERATE</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
In Hz:  #  or #Hz
</li><li class="listitem">
In kHz: #K or #KHz
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>--audiochannels</strong></span>=CHANNELS, <span class="strong"><strong>-o audiochannels</strong></span>=CHANNELS
</span></dt><dd><p class="simpara">
This limits the number of output channels to <span class="emphasis"><em>CHANNELS</em></span>. If the source has more channels, the number will be reduced to this limit.
</p><p class="simpara">Typical values are 1, 2 or 6 (e.g., 5.1) channels.</p><p class="simpara">If the target codec does not support the selected number of channels, transcoding may fail.</p><p class="simpara">Set to 0 to keep the number of channels.</p><p class="simpara">Defaults to: <span class="strong"><strong>2 channels (stereo)</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--audiosamplefmt</strong></span>=SAMPLEFMT, <span class="strong"><strong>-o audiosamplefmt</strong></span>=SAMPLEFMT
</span></dt><dd><p class="simpara">
This sets a sample format. <span class="emphasis"><em>SAMPLEFMT</em></span> can be:
</p><p class="simpara">0 to use the predefined setting; 8, 16, 32, 64 for integer format, F16, F32, F64 for floating point.</p><p class="simpara">Not all formats are supported by all destination types. Selecting an invalid format will be reported as a command line error and a list of values printed.</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Container Format</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>Sample Format</strong></span></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>AIFF</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>0, 16, 32</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>ALAC</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>0, 16, 24</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>WAV</strong></span></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>0, 8, 16, 32, 64, F16, F32, F64</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><span class="strong"><strong>FLAC</strong></span></p></td><td style="" align="left" valign="top"><p>0, 16, 24</p></td></tr></tbody></table></div><p class="simpara">Defaults to: 0 (Use the same as the source or the predefined format of the destination if the source format is not possible.)</p></dd></dl></div></div><div class="refsect2"><a name="_video_options"></a><h3>Video Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--videobitrate</strong></span>=BITRATE, <span class="strong"><strong>-o videobitrate</strong></span>=BITRATE
</span></dt><dd><p class="simpara">
This sets the video encoding bit rate. Setting this too high or too low may cause transcoding to fail.
</p><p class="simpara">Defaults to: <span class="strong"><strong>2 Mbit</strong></span></p><p class="simpara"><span class="strong"><strong>mp4:</strong></span> May be specified as 500 to 25,000 kbps.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>BITRATE</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
n bit/s:  #  or #bps
</li><li class="listitem">
n kbit/s: #K or #Kbps
</li><li class="listitem">
n Mbit/s: #M or #Mbps
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>--videoheight</strong></span>=HEIGHT, -o <span class="strong"><strong>videoheight</strong></span>=HEIGHT
</span></dt><dd><p class="simpara">
This sets the height of the transcoded video.
</p><p class="simpara">When the video is rescaled, the aspect ratio is preserved if --width is not set at the same time.</p><p class="simpara">Defaults to: <span class="strong"><strong>keep source video height</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--videowidth</strong></span>=WIDTH, -o <span class="strong"><strong>videowidth</strong></span>=WIDTH
</span></dt><dd><p class="simpara">
This sets the width of the transcoded video.
</p><p class="simpara">When the video is rescaled, the aspect ratio is preserved if --height is not set at the same time.</p><p class="simpara">Defaults to: <span class="strong"><strong>keep source video width</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--deinterlace</strong></span>, -o <span class="strong"><strong>deinterlace</strong></span>
</span></dt><dd><p class="simpara">
Deinterlace video if necessary while transcoding.
</p><p class="simpara">This may need a higher bit rate, but this will increase picture quality when streaming via HTML5.</p><p class="simpara">Defaults to: "no deinterlace"</p></dd></dl></div></div><div class="refsect2"><a name="_hls_options"></a><h3>HLS Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--segment_duration</strong></span>, -o <span class="strong"><strong>segment_duration</strong></span>
</span></dt><dd><p class="simpara">
Set the duration of one video segment of the HLS stream. This argument is a floating point value, e.g., it can be set to 2.5 for 2500 milliseconds.
</p><p class="simpara">Should normally be left as the default.</p><p class="simpara"><span class="strong"><strong>Note:</strong></span> This applies to the HLS output format only, and is ignored for all other formats.</p><p class="simpara">Defaults to: <span class="strong"><strong>10 seconds</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--min_seek_time_diff</strong></span>, -o <span class="strong"><strong>min_seek_time_diff</strong></span>
</span></dt><dd><p class="simpara">
If the requested HLS segment is less than min_seek_time seconds away, discard the seek request.
The segment will be available very soon anyway, and that makes a re-transcode necessary. Set to 0 to disable.
</p><p class="simpara">Should normally be left as the default.</p><p class="simpara"><span class="strong"><strong>Note:</strong></span> This applies to the HLS output format only, and is ignored for all other formats.</p><p class="simpara">Defaults to: <span class="strong"><strong>30 seconds</strong></span></p></dd></dl></div></div><div class="refsect2"><a name="_hardware_acceleration_options"></a><h3>Hardware Acceleration Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--hwaccel_enc</strong></span>=API, <span class="strong"><strong>-o hwaccel_enc</strong></span>=API
</span></dt><dd><p class="simpara">
Select the hardware acceleration API for encoding.
</p><p class="simpara">Defaults to: <span class="strong"><strong>NONE</strong></span> (no acceleration).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>API</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>NONE</strong></span>: use software encoder
</li><li class="listitem">
<span class="strong"><strong>VAAPI</strong></span>: Video Acceleration API (VA-API)
</li><li class="listitem">
<span class="strong"><strong>OMX</strong></span>: OpenMAX (Open Media Acceleration)
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>--hwaccel_dec_blocked</strong></span>=CODEC[:PROFILE[:PROFILE]], <span class="strong"><strong>-o hwaccel_dec_blocked</strong></span>=CODEC:[:PROFILE[:PROFILE]]
</span></dt><dd><p class="simpara">
Block a codec and, optionally, a profile for hardware decoding. The option can be repeated to block several codecs.
</p><p class="simpara">Defaults to: no codecs blocked.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>CODEC</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>H263</strong></span>:  H.263
</li><li class="listitem">
<span class="strong"><strong>H264</strong></span>:  H.264
</li><li class="listitem">
<span class="strong"><strong>HEVC</strong></span>:  H.265 / HEVC
</li><li class="listitem">
<span class="strong"><strong>MPEG2</strong></span>: MPEG-2 video
</li><li class="listitem">
<span class="strong"><strong>MPEG4</strong></span>: MPEG-4 video
</li><li class="listitem">
<span class="strong"><strong>VC1</strong></span>:   SMPTE VC-1
</li><li class="listitem">
<span class="strong"><strong>VP8</strong></span>:   Google VP9
</li><li class="listitem">
<span class="strong"><strong>VP9</strong></span>:   Google VP9
</li><li class="listitem">
<span class="strong"><strong>WMV3</strong></span>:  Windows Media Video 9
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>PROFILE</strong></span>
</span></dt><dd><p class="simpara">
can optionally be added to block a certain profile from the codec only.
</p><p class="simpara">Example: VP9:0 blocks Google VP profile 0.</p><p class="simpara">Example: H264:1:33 blocks H.264 profile 1 and 33.</p></dd><dt><span class="term">
<span class="strong"><strong>--hwaccel_enc_device</strong></span>=DEVICE, -o <span class="strong"><strong>hwaccel_enc_device</strong></span>=DEVICE
</span></dt><dd><p class="simpara">
Select the hardware acceleration device. May be required for VAAPI, especially if more than one device is available.
</p><p class="simpara"><span class="strong"><strong>Note:</strong></span> This only applies to VAAPI hardware acceleration; all other types are ignored.</p><p class="simpara">Defaults to: <span class="strong"><strong>empty</strong></span> (use default device).</p><p class="simpara">Example: <span class="strong"><strong>/dev/dri/renderD128</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--hwaccel_dec</strong></span>=API, <span class="strong"><strong>-o hwaccel_dec</strong></span>=API
</span></dt><dd><p class="simpara">
Select the hardware acceleration API for decoding.
</p><p class="simpara">Defaults to: <span class="strong"><strong>NONE</strong></span> (no acceleration)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>API</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>NONE</strong></span>: use software decoder
</li><li class="listitem">
<span class="strong"><strong>VAAPI</strong></span>: Video Acceleration API (VA-API)
</li><li class="listitem">
<span class="strong"><strong>MMAL</strong></span>: Multimedia Abstraction Layer by Broadcom
</li></ul></div></dd></dl></div></dd><dt><span class="term">
<span class="strong"><strong>--hwaccel_dec_device</strong></span>=DEVICE, -o <span class="strong"><strong>hwaccel_dec_device</strong></span>=DEVICE
</span></dt><dd><p class="simpara">
Select the hardware acceleration device. May be required for VAAPI, especially if more than one device is available.
</p><p class="simpara"><span class="strong"><strong>Note:</strong></span> This only applies to VAAPI hardware acceleration; all other types are ignored.</p><p class="simpara">Defaults to: <span class="strong"><strong>empty</strong></span> (use default device)</p><p class="simpara">Example: <span class="strong"><strong>/dev/dri/renderD128</strong></span></p></dd></dl></div></div><div class="refsect2"><a name="_album_arts"></a><h3>Album Arts</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
--<span class="strong"><strong>noalbumarts</strong></span>, -o <span class="strong"><strong>noalbumarts</strong></span>
</span></dt><dd><p class="simpara">
Do not copy album art into the output file.
</p><p class="simpara">This will reduce the file size and may be useful when streaming via HTML5 when album art is not used anyway.</p><p class="simpara">Defaults to: <span class="strong"><strong>add album arts</strong></span></p></dd></dl></div></div><div class="refsect2"><a name="_virtual_script"></a><h3>Virtual Script</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
--<span class="strong"><strong>enablescript</strong></span>, -o <span class="strong"><strong>enablescript</strong></span>
</span></dt><dd><p class="simpara">
Add a virtual index.php to every directory. It reads scripts/videotag.php from the FFmpegfs binary directory.
</p><p class="simpara">This can be very handy for testing video playback. Of course, feel free to replace videotag.php with your own script.</p><p class="simpara">Defaults to: <span class="strong"><strong>Do not generate script file</strong></span></p></dd><dt><span class="term">
--<span class="strong"><strong>scriptfile</strong></span>, -o <span class="strong"><strong>scriptfile</strong></span>
</span></dt><dd><p class="simpara">
Set the name of the virtual script created in each directory.
</p><p class="simpara">Defaults to: <span class="strong"><strong>index.php</strong></span></p></dd><dt><span class="term">
--<span class="strong"><strong>scriptsource</strong></span>, -o <span class="strong"><strong>scriptsource</strong></span>
</span></dt><dd><p class="simpara">
Use a different source file.
</p><p class="simpara">Defaults to: <span class="strong"><strong>scripts/videotag.php</strong></span></p></dd></dl></div></div><div class="refsect2"><a name="_cache_options"></a><h3>Cache Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--expiry_time</strong></span>=TIME, <span class="strong"><strong>-o expiry_time</strong></span>=TIME
</span></dt><dd><p class="simpara">
Cache entries expire after <span class="emphasis"><em>TIME</em></span> and will be deleted to save disc space.
</p><p class="simpara">Defaults to: <span class="strong"><strong>1 week</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--max_inactive_suspend</strong></span>=TIME, <span class="strong"><strong>-o max_inactive_suspend</strong></span>=TIME
</span></dt><dd><p class="simpara">
While being accessed, the file is transcoded to the target format in the background. When the client quits, transcoding will continue until this time out. Transcoding is suspended until it is accessed again, then transcoding will continue.
</p><p class="simpara">Defaults to: <span class="strong"><strong>15 seconds</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--max_inactive_abort</strong></span>=TIME, <span class="strong"><strong>-o max_inactive_abort</strong></span>=TIME
</span></dt><dd><p class="simpara">
While being accessed, the file is transcoded in the background to the target format. When the client quits, transcoding will continue until this time out, then the transcoder thread quits.
</p><p class="simpara">Defaults to: <span class="strong"><strong>30 seconds</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--prebuffer_size</strong></span>=SIZE, <span class="strong"><strong>-o prebuffer_size</strong></span>=SIZE
</span></dt><dd><p class="simpara">
Files will be decoded until the buffer contains this many bytes, allowing playback to start smoothly without lags.
</p><p class="simpara">Set to 0 to disable pre-buffering.</p><p class="simpara">Defaults to: <span class="strong"><strong>100 KB</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--max_cache_size</strong></span>=SIZE, <span class="strong"><strong>-o max_cache_size</strong></span>=SIZE
</span></dt><dd><p class="simpara">
Set the maximum diskspace used by the cache. If the cache grows beyond this limit when a file is transcoded, old entries will be deleted to keep the cache within the size limit.
</p><p class="simpara">Defaults to: <span class="strong"><strong>unlimited</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--min_diskspace</strong></span>=SIZE, <span class="strong"><strong>-o min_diskspace</strong></span>=SIZE
</span></dt><dd><p class="simpara">
Set the required diskspace on the cachepath mount. If the remaining space falls below <span class="emphasis"><em>SIZE</em></span> when a file is transcoded, old entries will be deleted to keep the diskspace within the limit.
</p><p class="simpara">Defaults to: <span class="strong"><strong>0 (no minimum space)</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--cachepath</strong></span>=DIR, <span class="strong"><strong>-o cachepath</strong></span>=DIR
</span></dt><dd><p class="simpara">
Sets the disc cache directory to <span class="emphasis"><em>DIR</em></span>. If it does not already exist, it will be created. The user running FFmpegfs must have write access to the location.
</p><p class="simpara"></p></dd><dt><span class="term">
<span class="strong"><strong>--disable_cache</strong></span>, -o <span class="strong"><strong>disable_cache</strong></span>
</span></dt><dd><p class="simpara">
Disable the cache functionality completely.
</p><p class="simpara">Defaults to: <span class="strong"><strong>enabled</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--cache_maintenance</strong></span>=TIME, <span class="strong"><strong>-o cache_maintenance</strong></span>=TIME
</span></dt><dd><p class="simpara">
Starts cache maintenance in <span class="emphasis"><em>TIME</em></span> intervals. This will enforce the expery_time, max_cache_size and min_diskspace settings. Do not set it too low as this can slow down transcoding.
</p><p class="simpara">Only one FFmpegfs process will do the maintenance by becoming the master. If that process exits, another will take over, so that one will always do the maintenance.</p><p class="simpara">Defaults to: <span class="strong"><strong>1 hour</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--prune_cache</strong></span>
</span></dt><dd>
Prune the cache immediately according to the above settings at application start up.
</dd><dt><span class="term">
<span class="strong"><strong>--clear_cache</strong></span>, <span class="strong"><strong>-o clear_cache</strong></span>
</span></dt><dd><p class="simpara">
On startup, clear the cache. All previously transcoded files will be deleted.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>TIME</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Seconds: #
</li><li class="listitem">
Minutes: #m
</li><li class="listitem">
Hours:   #h
</li><li class="listitem">
Days:    #d
</li><li class="listitem">
Weeks:   #w
</li></ul></div></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>SIZE</strong></span>
</span></dt><dd><p class="simpara">
can be defined as&#8230;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
In bytes:  # or #B
</li><li class="listitem">
In KBytes: #K or #KB
</li><li class="listitem">
In MBytes: #M or #MB
</li><li class="listitem">
In GBytes: #G or #GB
</li><li class="listitem">
In TBytes: #T or #TB
</li></ul></div></dd></dl></div></dd></dl></div></div><div class="refsect2"><a name="_other"></a><h3>Other</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--max_threads</strong></span>=COUNT, <span class="strong"><strong>-o max_threads</strong></span>=COUNT
</span></dt><dd><p class="simpara">
Limit concurrent transcoder threads. Set to 0 for unlimited threads. Recommended values are up to 16 times the number of CPU cores. Should be left as the default.
</p><p class="simpara">Defaults to: <span class="strong"><strong>16 times number of detected cpu cores</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--decoding_errors</strong></span>, <span class="strong"><strong>-o decoding_errors</strong></span>
</span></dt><dd><p class="simpara">
Decoding errors are normally ignored, leaving bloopers and hiccups in encoded audio or video but still creating a valid file. When this option is set, transcoding will stop with an error.
</p><p class="simpara">Defaults to: <span class="strong"><strong>Ignore errors</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--min_dvd_chapter_duration</strong></span>=SECONDS, <span class="strong"><strong>-o min_dvd_chapter_duration</strong></span>=SECONDS
</span></dt><dd><p class="simpara">
This ignores DVD chapters shorter than SECONDS. To disable, set to 0. This avoids transcoding errors for DVD chapters too short to detect its streams.
</p><p class="simpara">Defaults to: <span class="strong"><strong>1 second</strong></span></p></dd><dt><span class="term">
<span class="strong"><strong>--win_smb_fix</strong></span>, <span class="strong"><strong>-o win_smb_fix</strong></span>
</span></dt><dd><p class="simpara">
Windows seems to access the files on Samba drives starting at the last 64K segment when the file is opened. Setting --win_smb_fix=1 will ignore these attempts (not decode the file up to this point).
</p><p class="simpara">Defaults to: <span class="strong"><strong>on</strong></span></p></dd></dl></div></div><div class="refsect2"><a name="_logging"></a><h3>Logging</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--log_maxlevel</strong></span>=LEVEL, <span class="strong"><strong>-o log_maxlevel</strong></span>=LEVEL
</span></dt><dd><p class="simpara">
Maximum level of messages to log, either ERROR, WARNING, INFO, DEBUG or TRACE. Defaults to INFO and is always set to DEBUG in debug mode.
</p><p class="simpara">Note that the other log flags must also be set to enable logging.</p></dd><dt><span class="term">
<span class="strong"><strong>--log_stderr</strong></span>, <span class="strong"><strong>-o log_stderr</strong></span>
</span></dt><dd>
Enable outputting logging messages to stderr. Automatically enabled in debug mode.
</dd><dt><span class="term">
<span class="strong"><strong>--log_syslog</strong></span>, <span class="strong"><strong>-o log_syslog</strong></span>
</span></dt><dd>
Enable outputting logging messages to syslog.
</dd><dt><span class="term">
<span class="strong"><strong>--logfile</strong></span>=FILE, <span class="strong"><strong>-o logfile</strong></span>=FILE
</span></dt><dd>
File to output log messages to. By default, no file will be written.
</dd></dl></div></div><div class="refsect2"><a name="_general_fuse_options"></a><h3>General/FUSE options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-d</strong></span>, <span class="strong"><strong>-o debug</strong></span>
</span></dt><dd>
Enable debug output. This will result in a large quantity of diagnostic information being printed to stderr as the programme runs. It implies <span class="strong"><strong>-f</strong></span>.
</dd><dt><span class="term">
<span class="strong"><strong>-f</strong></span>
</span></dt><dd>
Run in the foreground instead of detaching from the terminal.
</dd><dt><span class="term">
<span class="strong"><strong>-h</strong></span>, <span class="strong"><strong>--help</strong></span>
</span></dt><dd>
Print usage information.
</dd><dt><span class="term">
<span class="strong"><strong>-V</strong></span>, <span class="strong"><strong>--version</strong></span>
</span></dt><dd>
Output version information.
</dd><dt><span class="term">
<span class="strong"><strong>-c</strong></span>, <span class="strong"><strong>--capabilities</strong></span>
</span></dt><dd>
Output FFmpeg capabilities: a list of the system&#8217;s available codecs.
</dd><dt><span class="term">
<span class="strong"><strong>-s</strong></span>
</span></dt><dd>
Force single-threaded operation.
</dd></dl></div></div></div><div class="refsect1"><a name="_usage"></a><h2>Usage</h2><p>Mount your filesystem like this:</p><pre class="literallayout">ffmpegfs [--audiobitrate bitrate] [--videobitrate bitrate] musicdir mountpoint [-o fuse_options]</pre><p>For example,</p><pre class="literallayout">ffmpegfs --audiobitrate 256K -videobitrate 2000000 /mnt/music /mnt/ffmpegfs -o allow_other,ro</pre><p>In recent versions of FUSE and FFmpegfs, the same can be achieved with the following entry in <code class="literal">/etc/fstab</code>:</p><pre class="literallayout">ffmpegfs#/mnt/music /mnt/ffmpegfs fuse allow_other,ro,audiobitrate=256K,videobitrate=2000000 0 0</pre><p>Another (more modern) form of this command:</p><pre class="literallayout">/mnt/music /mnt/ffmpegfs fuse.ffmpegfs allow_other,ro,audiobitrate=256K,videobitrate=2000000 0 0</pre><p>At this point, files like <code class="literal">/mnt/music/{empty}*.flac</code> and <code class="literal">/mnt/music/{empty}*.ogg</code> will show up as <code class="literal">/mnt/ffmpegfs/{empty}*.mp4</code>.</p><p>Note that the "allow_other" option by default can only be used by root.
You must either run FFmpegfs as root or, better yet, add a "user_allow_other" key to /etc/fuse.conf.</p><p>"allow_other" is required to permit any user access to the mount. By default, this is only possible for the user who launched FFmpegfs.</p></div><div class="refsect1"><a name="_how_it_works"></a><h2>HOW IT WORKS</h2><p>When a file is opened, the decoder and encoder are initialised and the file metadata is read. At this time, the final file size can be determined approximately. This works well for MP3, AIFF, or WAV output files, but only fair-to-good for MP4 or WebM because the actual size heavily depends on the content encoded.</p><p>As the file is read, it is transcoded into an internal per-file buffer. This buffer continues to grow while the file is being read until the whole file is transcoded in memory. Once decoded, the file is kept in a disc buffer and can be accessed very quickly.</p><p>Transcoding is done in an extra thread, so if other processes access the same file, they will share the same transcoded data, saving CPU time. If all processes close the file before its end, transcoding will continue for some time. If the file is accessed again before the timeout, transcoding will continue. If not, it will stop, and the chunk created so far will be discarded to save disc space.</p><p>Seeking within a file will cause the file to be transcoded up to the seek point (if not already done). This is not usually a problem since most programmes will read a file from start to finish. Future enhancements may provide true random seeking (but if this is feasible, it is not yet clear due to restrictions to positioning inside compressed streams).</p><p>MP3: ID3 version 2.4 and 1.1 tags are created from the comments in the source file. They are located at the start and end of the file, respectively.</p><p>MP4: The same applies to meta atoms in MP4 containers.</p><p>MP3 target only: A special optimisation is made so that applications which scan for id3v1 tags do not have to wait for the whole file to be transcoded before reading the tag. This dramatically speeds up such applications.</p><p>WAV: A pro format WAV header will be created with estimates of the WAV file size. This header will be replaced when the file is finished. It does not seem necessary, though, as most modern players obviously ignore this information and play the file anyway</p></div><div class="refsect1"><a name="_about_output_formats"></a><h2>ABOUT OUTPUT FORMATS</h2><p>A few words about the supported output formats. There is not much to say about the MP3 output as these are regular constant bitrate (CBR) MP3 files with no strings attached. They should play well in any modern player.</p><p>MP4 files are special, though, as regular MP4s are not quite suited for live streaming. The reason is that the start block of an MP4 contains a field with the size of the compressed data section. Suffice it to say that this field cannot be filled in until the size is known, which means compression must be completed first, a file seek done to the beginning, and the size atom updated.</p><p>For a continuous live stream, that size will never be known. For our transcoded files, one would have to wait for the whole file to be recoded to get that value. If that was not enough, some important pieces of information are located at the end of the file, including meta tags with artist, album, etc. Also, there is only one big data block, a fact that hampers random seeking inside the contents without having the complete data section.</p><p>Subsequently, many applications will go to the end of an MP4 to read important information before going back to the head of the file and starting playing. This will break the whole transcode-on-demand idea of FFmpegfs.</p><p>To get around the restriction, several extensions have been developed, one of which is called "faststart", which relocates the aforementioned meta data from the end to the beginning of the MP4. Additionally, the size field can be left empty (0). isml (smooth live streaming) is another extension.</p><p>For direct-to-stream transcoding, several new features in MP4 need to be active (ISMV, faststart, separate_moof/empty_moov to name a few) which are not implemented in older versions of FFmpeg (or if available, not working properly).</p><p>By default, faststart files will be created with an empty size field so that the file can be started to be written out at once instead of encoding it as a whole before this is possible. Encoding it completely would mean it would take some time before playback could start.</p><p>The data part is divided into chunks of about 1 second each, each with its own header, so it is possible to fill in the size fields early enough.</p><p>As a draw back not all players support the format, or play it with strange side effects. VLC plays the file, but updates the time display every few seconds only. When streamed over HTML5 video tags, sometimes there will be no total time shown, but that is OK, as long as the file plays. Playback cannot be positioned past the current playback position, only backwards.</p><p>But that&#8217;s the price of starting playback fast.</p></div><div class="refsect1"><a name="_development"></a><h2>DEVELOPMENT</h2><p>FFmpegfs uses Git for revision control. You can obtain the full repository here:</p><pre class="literallayout">git clone https://github.com/nschlia/ffmpegfs.git</pre><p>FFmpegfs is written in a little bit of C and mostly C++11. It uses the following libraries:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://fuse.sourceforge.net/" target="_top">FUSE</a>
</li></ul></div><p>FFmpeg home pages:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="https://www.ffmpeg.org/" target="_top">FFmpeg</a>
</li></ul></div></div><div class="refsect1"><a name="_future_objectives"></a><h2>Future Objectives</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Create a Windows version
</li></ul></div></div><div class="refsect1"><a name="_files"></a><h2>FILES</h2><p><span class="strong"><strong>/usr/local/bin/ffmpegfs</strong></span>, <span class="strong"><strong>/etc/fstab</strong></span></p></div><div class="refsect1"><a name="_authors"></a><h2>AUTHORS</h2><p>This fork with FFmpeg support has been maintained by <a class="ulink" href="mailto:nschlia@oblivion-software.de" target="_top">Norbert Schlia</a> since 2017.</p><p>Based on work by K. Henriksson (from 2008 to 2017) and the original author, David Collett (from 2006 to 2008).</p><p>Many thanks to them for the original work!</p></div><div class="refsect1"><a name="_license"></a><h2>LICENSE</h2><p>This program can be distributed under the terms of the GNU GPL version 3
or later. It can be found <a class="ulink" href="http://www.gnu.org/licenses/gpl-3.0.html" target="_top">online</a>
or in the COPYING file.</p><p>This file and other documentation files can be distributed under the terms of
the GNU Free Documentation License 1.3 or later. It can be found
<a class="ulink" href="http://www.gnu.org/licenses/fdl-1.3.html" target="_top">online</a> or in the COPYING.DOC file.</p></div><div class="refsect1"><a name="_ffmpeg_license"></a><h2>FFMPEG LICENSE</h2><p>FFmpeg is licensed under the GNU Lesser General Public License (LGPL)
version 2.1 or later. However, FFmpeg incorporates several optional
parts and optimizations that are covered by the GNU General Public
License (GPL) version 2 or later. If those parts get used the GPL
applies to all of FFmpeg.</p><p>See <a class="ulink" href="https://www.ffmpeg.org/legal.html" target="_top">https://www.ffmpeg.org/legal.html</a> for details.</p></div><div class="refsect1"><a name="_copyright"></a><h2>COPYRIGHT</h2><p>This fork with FFmpeg support copyright (C) 2017-2022
<a class="ulink" href="mailto:nschlia@oblivion-software.de" target="_top">Norbert Schlia</a>.</p><p>Based on work copyright (C) 2006-2008 David Collett, 2008-2013
K. Henriksson.</p><p>Much thanks to them for the original work!</p><p>This is free software: you are free to change and redistribute it under
the terms of the GNU General Public License (GPL) version 3 or later.</p><p>This manual is copyright (C) 2010-2011 K. Henriksson and (C) 2017-2022
by N. Schlia and may be distributed under the GNU Free Documentation
License (GFDL) 1.3 or later with no invariant sections, or alternatively under the
GNU General Public License (GPL) version 3 or later.</p></div></div></body></html>
