<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: src/blurayparser.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">1.99</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">blurayparser.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Bluray disk parser implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ffmpegfs_8h_source.html">ffmpegfs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="blurayparser_8h_source.html">blurayparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="transcode_8h_source.html">transcode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ffmpeg__utils_8h_source.html">ffmpeg_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">logging.h</a>&quot;</code><br />
<code>#include &quot;libbluray/bluray.h&quot;</code><br />
<code>#include &lt;libavutil/rational.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for blurayparser.cc:</div>
<div class="dyncontent">
<div class="center"><img src="blurayparser_8cc__incl.png" border="0" usemap="#src_2blurayparser_8cc" alt=""/></div>
<map name="src_2blurayparser_8cc" id="src_2blurayparser_8cc">
<area shape="rect" id="node2" href="ffmpegfs_8h.html" title="Main include for FFmpegfs project. " alt="" coords="434,155,518,181"/>
<area shape="rect" id="node5" href="ffmpeg__utils_8h.html" title="Various FFmpegfs utility functions. " alt="" coords="280,229,384,256"/>
<area shape="rect" id="node15" href="blurayparser_8h.html" title="Bluray disk parser. " alt="" coords="543,155,647,181"/>
<area shape="rect" id="node16" href="transcode_8h.html" title="File transcoder interface (for use with by FUSE) " alt="" coords="632,80,723,107"/>
<area shape="rect" id="node17" href="logging_8h.html" title="Provide various log facilities to stderr, disk or syslog. " alt="" coords="747,80,821,107"/>
<area shape="rect" id="node11" href="fileio_8h.html" title="FileIO class. " alt="" coords="635,229,695,256"/>
<area shape="rect" id="node6" href="ffmpeg__compat_8h.html" title="FFmpeg API compatibility. " alt="" coords="5,304,128,331"/>
</map>
</div>
</div>
<p><a href="blurayparser_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3f03a6fec82a0abf0dfb7025ff4c21f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#a3f03a6fec82a0abf0dfb7025ff4c21f3">stream_info</a> (const std::string &amp;path, BLURAY_STREAM_INFO *ss, int *channels, int *sample_rate, int *audio, int *width, int *height, AVRational *framerate, int *interleaved)</td></tr>
<tr class="memdesc:a3f03a6fec82a0abf0dfb7025ff4c21f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information about Bluray stream.  <a href="#a3f03a6fec82a0abf0dfb7025ff4c21f3">More...</a><br /></td></tr>
<tr class="separator:a3f03a6fec82a0abf0dfb7025ff4c21f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84935cc18021375ba2475fb7851435d5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#a84935cc18021375ba2475fb7851435d5">parse_find_best_audio_stream</a> ()</td></tr>
<tr class="memdesc:a84935cc18021375ba2475fb7851435d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find best match audio stream.  <a href="#a84935cc18021375ba2475fb7851435d5">More...</a><br /></td></tr>
<tr class="separator:a84935cc18021375ba2475fb7851435d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1d91d3ccaa872502b7054e73ba33677"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#aa1d91d3ccaa872502b7054e73ba33677">parse_find_best_video_stream</a> ()</td></tr>
<tr class="memdesc:aa1d91d3ccaa872502b7054e73ba33677"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find best match video stream.  <a href="#aa1d91d3ccaa872502b7054e73ba33677">More...</a><br /></td></tr>
<tr class="separator:aa1d91d3ccaa872502b7054e73ba33677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3629b60b55784a2b0be1d920d331946e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#a3629b60b55784a2b0be1d920d331946e">create_bluray_virtualfile</a> (<a class="el" href="blurayio_8h.html#ab446b017f0a8a6c31684027d6ddd3a69">BLURAY</a> *bd, const BLURAY_TITLE_INFO *ti, const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler, bool is_main_title, bool full_title, uint32_t title_idx, uint32_t chapter_idx)</td></tr>
<tr class="memdesc:a3629b60b55784a2b0be1d920d331946e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a virtual file entry of a bluray chapter or title.  <a href="#a3629b60b55784a2b0be1d920d331946e">More...</a><br /></td></tr>
<tr class="separator:a3629b60b55784a2b0be1d920d331946e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45266d5096307aad8773c64b9923b2e9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#a45266d5096307aad8773c64b9923b2e9">parse_bluray</a> (const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler)</td></tr>
<tr class="memdesc:a45266d5096307aad8773c64b9923b2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse Bluray directory and get all Bluray titles and chapters as virtual files.  <a href="#a45266d5096307aad8773c64b9923b2e9">More...</a><br /></td></tr>
<tr class="separator:a45266d5096307aad8773c64b9923b2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164ba768b4e817e3b246ab0c915b9798"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="blurayparser_8cc.html#a164ba768b4e817e3b246ab0c915b9798">check_bluray</a> (const std::string &amp;_path, void *buf, fuse_fill_dir_t filler)</td></tr>
<tr class="memdesc:a164ba768b4e817e3b246ab0c915b9798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of titles on Bluray.  <a href="#a164ba768b4e817e3b246ab0c915b9798">More...</a><br /></td></tr>
<tr class="separator:a164ba768b4e817e3b246ab0c915b9798"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bluray disk parser implementation. </p>
<dl class="section author"><dt>Author</dt><dd>Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2017-2020 Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a164ba768b4e817e3b246ab0c915b9798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164ba768b4e817e3b246ab0c915b9798">&#9670;&nbsp;</a></span>check_bluray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_bluray </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of titles on Bluray. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- path to check </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- the buffer passed to the readdir() operation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filler</td><td>- Function to add an entry in a readdir() operation (see <a href="https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660">https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>buf and filler can be nullptr. In that case the call will run faster, so these parameters should only be passed if to be filled in. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>-errno or number or titles on Bluray </dd></dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00547">547</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00284">append_sep()</a>, <a class="el" href="fuseops_8cc_source.html#l00491">check_path()</a>, <a class="el" href="fuseops_8cc_source.html#l00498">load_path()</a>, <a class="el" href="blurayparser_8cc_source.html#l00492">parse_bluray()</a>, and <a class="el" href="logging_8h_source.html#l00162">Logging::trace()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01054">ffmpegfs_getattr()</a>, and <a class="el" href="fuseops_8cc_source.html#l00876">ffmpegfs_readdir()</a>.</p>

</div>
</div>
<a id="a3629b60b55784a2b0be1d920d331946e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3629b60b55784a2b0be1d920d331946e">&#9670;&nbsp;</a></span>create_bluray_virtualfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool create_bluray_virtualfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="blurayio_8h.html#ab446b017f0a8a6c31684027d6ddd3a69">BLURAY</a> *&#160;</td>
          <td class="paramname"><em>bd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BLURAY_TITLE_INFO *&#160;</td>
          <td class="paramname"><em>ti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_main_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>full_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>title_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>chapter_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a virtual file entry of a bluray chapter or title. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bd</td><td>- Bluray disk clip info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ti</td><td>- Bluray disk title info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- path to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">statbuf</td><td>- File status structure of original file. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- the buffer passed to the readdir() operation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filler</td><td>- Function to add an entry in a readdir() operation (see <a href="https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660">https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_main_title</td><td>- true if title_idx is the main title </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">full_title</td><td>- If true, create virtual file of all title. If false, include single chapter only. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">title_idx</td><td>- Zero-based title index on Bluray </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chapter_idx</td><td>- Zero-based chapter index on Bluray </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>buf and filler can be nullptr. In that case the call will run faster, so these parameters should only be passed if to be filled in. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>On error, returns false. On success, returns true. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>We actually calculate the overall Bluray bitrate here, including all audio streams, not just the video bitrate. This should be the video bitrate alone. We should also calculate the audio bitrate for the selected stream. </dd></dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00327">327</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00284">append_sep()</a>, <a class="el" href="ffmpeg__utils_8h_source.html#l00148">BITRATE</a>, <a class="el" href="logging_8h_source.html#l00185">Logging::debug()</a>, <a class="el" href="logging_8h_source.html#l00254">Logging::error()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00249">FFmpegfs_Format::fileext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00811">format_bitrate()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00852">format_duration()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00832">format_samplerate()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00930">format_size()</a>, <a class="el" href="fuseops_8cc_source.html#l00438">insert_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00264">FFmpegfs_Format::is_frameset()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00269">FFmpegfs_Format::is_hls()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00259">FFmpegfs_Format::is_multiformat()</a>, <a class="el" href="fileio_8h_source.html#l00196">VIRTUALFILE::BLURAY_CHAPTER::m_angle_no</a>, <a class="el" href="structVIRTUALFILE.html#a9e64065a093280e7d66810be6b1532f9">VIRTUALFILE::m_bluray</a>, <a class="el" href="fileio_8h_source.html#l00195">VIRTUALFILE::BLURAY_CHAPTER::m_chapter_no</a>, <a class="el" href="fileio_8h_source.html#l00141">VIRTUALFILE::m_duration</a>, <a class="el" href="ffmpegfs_8h_source.html#l00136">FFMPEGFS_PARAMS::m_format</a>, <a class="el" href="fileio_8h_source.html#l00136">VIRTUALFILE::m_format_idx</a>, <a class="el" href="fileio_8h_source.html#l00140">VIRTUALFILE::m_full_title</a>, <a class="el" href="fileio_8h_source.html#l00137">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00194">VIRTUALFILE::BLURAY_CHAPTER::m_playlist_no</a>, <a class="el" href="fileio_8h_source.html#l00142">VIRTUALFILE::m_predicted_size</a>, <a class="el" href="fileio_8h_source.html#l00193">VIRTUALFILE::BLURAY_CHAPTER::m_title_no</a>, <a class="el" href="fileio_8h_source.html#l00143">VIRTUALFILE::m_video_frame_count</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00077">params</a>, <a class="el" href="blurayparser_8cc_source.html#l00297">parse_find_best_audio_stream()</a>, <a class="el" href="blurayparser_8cc_source.html#l00307">parse_find_best_video_stream()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01104">replace_all()</a>, <a class="el" href="blurayparser_8cc_source.html#l00064">stream_info()</a>, <a class="el" href="logging_8h_source.html#l00162">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00246">transcoder_cached_filesize()</a>, <a class="el" href="transcode_8cc_source.html#l00274">transcoder_set_filesize()</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00112">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00113">VIRTUALFLAG_HLS</a>, and <a class="el" href="fileio_8h_source.html#l00100">VIRTUALTYPE_BLURAY</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00492">parse_bluray()</a>.</p>

</div>
</div>
<a id="a45266d5096307aad8773c64b9923b2e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45266d5096307aad8773c64b9923b2e9">&#9670;&nbsp;</a></span>parse_bluray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_bluray </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse Bluray directory and get all Bluray titles and chapters as virtual files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- path to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">statbuf</td><td>- File status structure of original file. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- the buffer passed to the readdir() operation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filler</td><td>- Function to add an entry in a readdir() operation (see <a href="https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660">https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns number of chapters found. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00492">492</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">References <a class="el" href="blurayparser_8cc_source.html#l00327">create_bluray_virtualfile()</a>, <a class="el" href="logging_8h_source.html#l00185">Logging::debug()</a>, and <a class="el" href="logging_8h_source.html#l00162">Logging::trace()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00547">check_bluray()</a>.</p>

</div>
</div>
<a id="a84935cc18021375ba2475fb7851435d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84935cc18021375ba2475fb7851435d5">&#9670;&nbsp;</a></span>parse_find_best_audio_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_find_best_audio_stream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find best match audio stream. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>is 0 really OK or shall we better parse? </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns index of best match stream. </dd></dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00297">297</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00327">create_bluray_virtualfile()</a>.</p>

</div>
</div>
<a id="aa1d91d3ccaa872502b7054e73ba33677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1d91d3ccaa872502b7054e73ba33677">&#9670;&nbsp;</a></span>parse_find_best_video_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_find_best_video_stream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find best match video stream. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>is 0 really OK or shall we better parse? </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns index of best match stream. </dd></dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00307">307</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00327">create_bluray_virtualfile()</a>.</p>

</div>
</div>
<a id="a3f03a6fec82a0abf0dfb7025ff4c21f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f03a6fec82a0abf0dfb7025ff4c21f3">&#9670;&nbsp;</a></span>stream_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stream_info </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLURAY_STREAM_INFO *&#160;</td>
          <td class="paramname"><em>ss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>audio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AVRational *&#160;</td>
          <td class="paramname"><em>framerate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>interleaved</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get information about Bluray stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path to Bluray disk. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ss</td><td>- BLURAY_STREAM_INFO object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">channels</td><td>- Number of audio channels in stream. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sample_rate</td><td>- Sample rate of stream. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">audio</td><td>- 1: stream contains audio, 0: no audio </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">width</td><td>- Width of video stream. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">height</td><td>- Height of video stream. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">framerate</td><td>- Frame rate of video stream. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">interleaved</td><td>- 1: video stream is interleaved, 0: video stream is not interleaved. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="blurayparser_8cc_source.html#l00064">64</a> of file <a class="el" href="blurayparser_8cc_source.html">blurayparser.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00254">Logging::error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00327">create_bluray_virtualfile()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
