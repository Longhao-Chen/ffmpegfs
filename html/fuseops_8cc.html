<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: src/fuseops.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">2.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fuseops.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Fuse operations implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="transcode_8h_source.html">transcode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ffmpeg__utils_8h_source.html">ffmpeg_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cache__maintenance_8h_source.html">cache_maintenance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vcdparser_8h_source.html">vcdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dvdparser_8h_source.html">dvdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="blurayparser_8h_source.html">blurayparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cuesheetparser_8h_source.html">cuesheetparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread__pool_8h_source.html">thread_pool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buffer_8h_source.html">buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cache__entry_8h_source.html">cache_entry.h</a>&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;regex&gt;</code><br />
<code>#include &lt;list&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fuseops.cc:</div>
<div class="dyncontent">
<div class="center"><img src="fuseops_8cc__incl.png" border="0" usemap="#asrc_2fuseops_8cc" alt=""/></div>
<map name="asrc_2fuseops_8cc" id="asrc_2fuseops_8cc">
<area shape="rect" title="Fuse operations implementation." alt="" coords="1417,5,1532,32"/>
<area shape="rect" href="transcode_8h.html" title="File transcoder interface (for use with by FUSE)" alt="" coords="665,80,764,107"/>
<area shape="rect" href="ffmpeg__utils_8h.html" title="Various FFmpegfs utility functions." alt="" coords="427,229,543,256"/>
<area shape="rect" title=" " alt="" coords="1071,304,1129,331"/>
<area shape="rect" title=" " alt="" coords="1483,379,1533,405"/>
<area shape="rect" href="cache__maintenance_8h.html" title="Cache maintenance" alt="" coords="851,80,1015,107"/>
<area shape="rect" href="logging_8h.html" title="Provide various log facilities to stderr, disk or syslog." alt="" coords="1280,229,1363,256"/>
<area shape="rect" href="vcdparser_8h.html" title="Video CD and Super Video CD parser." alt="" coords="1103,80,1201,107"/>
<area shape="rect" href="dvdparser_8h.html" title="DVD parser." alt="" coords="5,229,104,256"/>
<area shape="rect" href="blurayparser_8h.html" title="Bluray parser." alt="" coords="287,229,403,256"/>
<area shape="rect" href="cuesheetparser_8h.html" title="Clue sheet parser." alt="" coords="129,229,263,256"/>
<area shape="rect" href="thread__pool_8h.html" title="Thread pool class implementation." alt="" coords="1226,80,1337,107"/>
<area shape="rect" title=" " alt="" coords="1388,155,1463,181"/>
<area shape="rect" href="buffer_8h.html" title="Buffer class." alt="" coords="1503,229,1577,256"/>
<area shape="rect" href="cache__entry_8h.html" title="Cache entry" alt="" coords="1690,80,1801,107"/>
<area shape="rect" title=" " alt="" coords="1825,80,1897,107"/>
<area shape="rect" title=" " alt="" coords="1921,80,1964,107"/>
<area shape="rect" title=" " alt="" coords="1988,80,2063,107"/>
<area shape="rect" title=" " alt="" coords="2087,80,2161,107"/>
<area shape="rect" href="ffmpegfs_8h.html" title="Main include for FFmpegfs project." alt="" coords="584,155,677,181"/>
<area shape="rect" href="fileio_8h.html" title="FileIO class." alt="" coords="785,304,852,331"/>
<area shape="rect" title=" " alt="" coords="667,229,730,256"/>
<area shape="rect" title=" " alt="" coords="568,229,643,256"/>
<area shape="rect" href="ffmpeg__compat_8h.html" title="FFmpeg API compatibility." alt="" coords="442,304,579,331"/>
<area shape="rect" title=" " alt="" coords="125,379,184,405"/>
<area shape="rect" title=" " alt="" coords="871,379,934,405"/>
<area shape="rect" title=" " alt="" coords="604,304,711,331"/>
<area shape="rect" title=" " alt="" coords="243,304,418,331"/>
<area shape="rect" title=" " alt="" coords="761,379,847,405"/>
<area shape="rect" title=" " alt="" coords="609,379,737,405"/>
<area shape="rect" title=" " alt="" coords="752,155,816,181"/>
<area shape="rect" title=" " alt="" coords="1253,304,1326,331"/>
<area shape="rect" title=" " alt="" coords="1153,304,1228,331"/>
<area shape="rect" title=" " alt="" coords="1401,304,1465,331"/>
<area shape="rect" title=" " alt="" coords="1145,155,1225,181"/>
<area shape="rect" title=" " alt="" coords="1249,155,1313,181"/>
<area shape="rect" title=" " alt="" coords="891,155,954,181"/>
<area shape="rect" title=" " alt="" coords="978,155,1121,181"/>
<area shape="rect" title=" " alt="" coords="1540,304,1615,331"/>
<area shape="rect" href="cache_8h.html" title="Data cache management." alt="" coords="1689,155,1761,181"/>
<area shape="rect" href="id3v1tag_8h.html" title="ID3v1 tag structure" alt="" coords="1785,155,1876,181"/>
<area shape="rect" title=" " alt="" coords="1741,229,1819,256"/>
</map>
</div>
</div>
<p><a href="fuseops_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae586c5090d2e2c9105075061b0b8c6e9"><td class="memItemLeft" align="right" valign="top"><a id="ae586c5090d2e2c9105075061b0b8c6e9"></a>
typedef std::map&lt; const std::string, <a class="el" href="structVIRTUALFILE.html">VIRTUALFILE</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ae586c5090d2e2c9105075061b0b8c6e9">FILENAME_MAP</a></td></tr>
<tr class="memdesc:ae586c5090d2e2c9105075061b0b8c6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map source file names to virtual file objects. <br /></td></tr>
<tr class="separator:ae586c5090d2e2c9105075061b0b8c6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5aedf36ce797b833313a1e453f10260d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a5aedf36ce797b833313a1e453f10260d">init_stat</a> (struct stat *stbuf, size_t fsize, time_t ftime, bool directory)</td></tr>
<tr class="memdesc:a5aedf36ce797b833313a1e453f10260d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a stat structure.  <a href="fuseops_8cc.html#a5aedf36ce797b833313a1e453f10260d">More...</a><br /></td></tr>
<tr class="separator:a5aedf36ce797b833313a1e453f10260d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa158bbaa07a77c484263bac4acc08f7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#afa158bbaa07a77c484263bac4acc08f7">make_file</a> (void *buf, fuse_fill_dir_t filler, <a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;origpath, const std::string &amp;filename, size_t fsize, time_t ftime, int flags)</td></tr>
<tr class="memdesc:afa158bbaa07a77c484263bac4acc08f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a virtual file.  <a href="fuseops_8cc.html#afa158bbaa07a77c484263bac4acc08f7">More...</a><br /></td></tr>
<tr class="separator:afa158bbaa07a77c484263bac4acc08f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac260bddf3d7e55d8b9b396251e6519d6"><td class="memItemLeft" align="right" valign="top"><a id="ac260bddf3d7e55d8b9b396251e6519d6"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ac260bddf3d7e55d8b9b396251e6519d6">prepare_script</a> ()</td></tr>
<tr class="memdesc:ac260bddf3d7e55d8b9b396251e6519d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the virtual script file into memory and store in buffer. <br /></td></tr>
<tr class="separator:ac260bddf3d7e55d8b9b396251e6519d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66c48999dc2161a69398c5e44c777792"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a66c48999dc2161a69398c5e44c777792">translate_path</a> (std::string *origpath, const char *path)</td></tr>
<tr class="memdesc:a66c48999dc2161a69398c5e44c777792"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate file names from FUSE to the original absolute path.  <a href="fuseops_8cc.html#a66c48999dc2161a69398c5e44c777792">More...</a><br /></td></tr>
<tr class="separator:a66c48999dc2161a69398c5e44c777792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba2f69b5cad51dfdad024c9efccb684"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#acba2f69b5cad51dfdad024c9efccb684">transcoded_name</a> (std::string *filepath, <a class="el" href="classFFmpegfs__Format.html">FFmpegfs_Format</a> **current_format)</td></tr>
<tr class="memdesc:acba2f69b5cad51dfdad024c9efccb684"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert file name from source to destination name.  <a href="fuseops_8cc.html#acba2f69b5cad51dfdad024c9efccb684">More...</a><br /></td></tr>
<tr class="separator:acba2f69b5cad51dfdad024c9efccb684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6170253fb38784430b1fc2d0ffce74dc"><td class="memItemLeft" align="right" valign="top">static FILENAME_MAP::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a6170253fb38784430b1fc2d0ffce74dc">find_prefix</a> (const <a class="el" href="fuseops_8cc.html#ae586c5090d2e2c9105075061b0b8c6e9">FILENAME_MAP</a> &amp;map, const std::string &amp;search_for)</td></tr>
<tr class="memdesc:a6170253fb38784430b1fc2d0ffce74dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find mapped file by prefix. Normally used to find a path.  <a href="fuseops_8cc.html#a6170253fb38784430b1fc2d0ffce74dc">More...</a><br /></td></tr>
<tr class="separator:a6170253fb38784430b1fc2d0ffce74dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9676a5e6a30d145619a678d896b6a3d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a9676a5e6a30d145619a678d896b6a3d8">get_source_properties</a> (const std::string &amp;origpath, <a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> virtualfile)</td></tr>
<tr class="memdesc:a9676a5e6a30d145619a678d896b6a3d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the video frame count.  <a href="fuseops_8cc.html#a9676a5e6a30d145619a678d896b6a3d8">More...</a><br /></td></tr>
<tr class="separator:a9676a5e6a30d145619a678d896b6a3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4cd45ac66c23edfc4e8668dd7446a2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a9b4cd45ac66c23edfc4e8668dd7446a2">make_hls_fileset</a> (void *buf, fuse_fill_dir_t filler, const std::string &amp;origpath, <a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> virtualfile)</td></tr>
<tr class="memdesc:a9b4cd45ac66c23edfc4e8668dd7446a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a virtual HLS file set.  <a href="fuseops_8cc.html#a9b4cd45ac66c23edfc4e8668dd7446a2">More...</a><br /></td></tr>
<tr class="separator:a9b4cd45ac66c23edfc4e8668dd7446a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac422769b0b726d7438d3e0f39eebf00f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ac422769b0b726d7438d3e0f39eebf00f">kick_next</a> (<a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> virtualfile)</td></tr>
<tr class="memdesc:ac422769b0b726d7438d3e0f39eebf00f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Give next song in cuesheet list a kick start Starts transcoding of the next song on the cuesheet list to ensure a somewhat gapless start when the current song finishes. Next song can be played from cache and start faster then.  <a href="fuseops_8cc.html#ac422769b0b726d7438d3e0f39eebf00f">More...</a><br /></td></tr>
<tr class="separator:ac422769b0b726d7438d3e0f39eebf00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62555502b0803b643078ab86ba4202e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aa62555502b0803b643078ab86ba4202e">ffmpegfs_readlink</a> (const char *path, char *buf, size_t size)</td></tr>
<tr class="memdesc:aa62555502b0803b643078ab86ba4202e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the target of a symbolic link.  <a href="fuseops_8cc.html#aa62555502b0803b643078ab86ba4202e">More...</a><br /></td></tr>
<tr class="separator:aa62555502b0803b643078ab86ba4202e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0c07bc6805650f5da69fc23258cc51"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a6c0c07bc6805650f5da69fc23258cc51">ffmpegfs_readdir</a> (const char *path, void *buf, fuse_fill_dir_t filler, off_t, struct fuse_file_info *)</td></tr>
<tr class="memdesc:a6c0c07bc6805650f5da69fc23258cc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read directory.  <a href="fuseops_8cc.html#a6c0c07bc6805650f5da69fc23258cc51">More...</a><br /></td></tr>
<tr class="separator:a6c0c07bc6805650f5da69fc23258cc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823061cda8036c46d185b5edd62bf770"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a823061cda8036c46d185b5edd62bf770">ffmpegfs_getattr</a> (const char *path, struct stat *stbuf)</td></tr>
<tr class="memdesc:a823061cda8036c46d185b5edd62bf770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file attributes.  <a href="fuseops_8cc.html#a823061cda8036c46d185b5edd62bf770">More...</a><br /></td></tr>
<tr class="separator:a823061cda8036c46d185b5edd62bf770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1000cf42094a79b839894b46f5fc4c7b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a1000cf42094a79b839894b46f5fc4c7b">ffmpegfs_fgetattr</a> (const char *path, struct stat *stbuf, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a1000cf42094a79b839894b46f5fc4c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get attributes from an open file.  <a href="fuseops_8cc.html#a1000cf42094a79b839894b46f5fc4c7b">More...</a><br /></td></tr>
<tr class="separator:a1000cf42094a79b839894b46f5fc4c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a7cfbbef8bf8b2532fc79e42376cb6450">ffmpegfs_open</a> (const char *path, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="mdescLeft">&#160;</td><td class="mdescRight">File open operation.  <a href="fuseops_8cc.html#a7cfbbef8bf8b2532fc79e42376cb6450">More...</a><br /></td></tr>
<tr class="separator:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef0ba435c786787e54896e4d4613dfe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a0ef0ba435c786787e54896e4d4613dfe">ffmpegfs_read</a> (const char *path, char *buf, size_t size, off_t offset, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a0ef0ba435c786787e54896e4d4613dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from an open file.  <a href="fuseops_8cc.html#a0ef0ba435c786787e54896e4d4613dfe">More...</a><br /></td></tr>
<tr class="separator:a0ef0ba435c786787e54896e4d4613dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea4779d4bb43472f16f47d7376a6e40"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aaea4779d4bb43472f16f47d7376a6e40">ffmpegfs_statfs</a> (const char *path, struct statvfs *stbuf)</td></tr>
<tr class="memdesc:aaea4779d4bb43472f16f47d7376a6e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file system statistics.  <a href="fuseops_8cc.html#aaea4779d4bb43472f16f47d7376a6e40">More...</a><br /></td></tr>
<tr class="separator:aaea4779d4bb43472f16f47d7376a6e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6a5a4b01296278169ca568d5875cf8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a3b6a5a4b01296278169ca568d5875cf8">ffmpegfs_release</a> (const char *path, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a3b6a5a4b01296278169ca568d5875cf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release an open file.  <a href="fuseops_8cc.html#a3b6a5a4b01296278169ca568d5875cf8">More...</a><br /></td></tr>
<tr class="separator:a3b6a5a4b01296278169ca568d5875cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a8c3b11e8f6bdd36ec82e5332c667ea7b">sighandler</a> (int signum)</td></tr>
<tr class="memdesc:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replacement SIGINT handler.  <a href="fuseops_8cc.html#a8c3b11e8f6bdd36ec82e5332c667ea7b">More...</a><br /></td></tr>
<tr class="separator:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aa7d57eecd770c51ee5af839fe0c0f88f">ffmpegfs_init</a> (struct fuse_conn_info *conn)</td></tr>
<tr class="memdesc:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise filesystem.  <a href="fuseops_8cc.html#aa7d57eecd770c51ee5af839fe0c0f88f">More...</a><br /></td></tr>
<tr class="separator:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f5abb75c59040d697f629d27a7eee8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a95f5abb75c59040d697f629d27a7eee8">ffmpegfs_destroy</a> (__attribute__((unused)) void *p)</td></tr>
<tr class="memdesc:a95f5abb75c59040d697f629d27a7eee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up filesystem.  <a href="fuseops_8cc.html#a95f5abb75c59040d697f629d27a7eee8">More...</a><br /></td></tr>
<tr class="separator:a95f5abb75c59040d697f629d27a7eee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba36c9d61873d571f862ab1952a43fe5"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aba36c9d61873d571f862ab1952a43fe5">get_number</a> (const char *path, uint32_t *value)</td></tr>
<tr class="memdesc:aba36c9d61873d571f862ab1952a43fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the number for a file name.  <a href="fuseops_8cc.html#aba36c9d61873d571f862ab1952a43fe5">More...</a><br /></td></tr>
<tr class="separator:aba36c9d61873d571f862ab1952a43fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memItemLeft" align="right" valign="top"><a id="a98fc6202ddd48ca1ad9db1b96baf9d63"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a98fc6202ddd48ca1ad9db1b96baf9d63">init_fuse_ops</a> (void)</td></tr>
<tr class="memdesc:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise FUSE operation structure. <br /></td></tr>
<tr class="separator:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdbaa20604e099c230f6a18bae4c0ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#abbdbaa20604e099c230f6a18bae4c0ff">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfile, const struct stat *stbuf, int flags)</td></tr>
<tr class="memdesc:abbdbaa20604e099c230f6a18bae4c0ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list.  <a href="fuseops_8cc.html#abbdbaa20604e099c230f6a18bae4c0ff">More...</a><br /></td></tr>
<tr class="separator:abbdbaa20604e099c230f6a18bae4c0ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e8e3c01bbf6eaebf4ebce268e9ad10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a00e8e3c01bbf6eaebf4ebce268e9ad10">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfile, const std::string &amp;origfile, const struct stat *stbuf, int flags)</td></tr>
<tr class="memdesc:a00e8e3c01bbf6eaebf4ebce268e9ad10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list. If the file already exists, it will be updated.  <a href="fuseops_8cc.html#a00e8e3c01bbf6eaebf4ebce268e9ad10">More...</a><br /></td></tr>
<tr class="separator:a00e8e3c01bbf6eaebf4ebce268e9ad10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d4c12a4097e21fada1f6c9c57f6879"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a17d4c12a4097e21fada1f6c9c57f6879">insert_dir</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtdir, const struct stat *stbuf, int flags)</td></tr>
<tr class="memdesc:a17d4c12a4097e21fada1f6c9c57f6879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual directory to internal list. If the file already exists, it will be updated.  <a href="fuseops_8cc.html#a17d4c12a4097e21fada1f6c9c57f6879">More...</a><br /></td></tr>
<tr class="separator:a17d4c12a4097e21fada1f6c9c57f6879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ace4961a810d54562267ade0f83f6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a06ace4961a810d54562267ade0f83f6b">find_file</a> (const std::string &amp;virtfile)</td></tr>
<tr class="memdesc:a06ace4961a810d54562267ade0f83f6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find file in cache.  <a href="fuseops_8cc.html#a06ace4961a810d54562267ade0f83f6b">More...</a><br /></td></tr>
<tr class="separator:a06ace4961a810d54562267ade0f83f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aaccd4c147efa346efcbb3c4fbb1e0a1a">check_path</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash.  <a href="fuseops_8cc.html#aaccd4c147efa346efcbb3c4fbb1e0a1a">More...</a><br /></td></tr>
<tr class="separator:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757570119497576827529b07c0aa4147"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a757570119497576827529b07c0aa4147">load_path</a> (const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler)</td></tr>
<tr class="memdesc:a757570119497576827529b07c0aa4147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a path with virtual files for FUSE.  <a href="fuseops_8cc.html#a757570119497576827529b07c0aa4147">More...</a><br /></td></tr>
<tr class="separator:a757570119497576827529b07c0aa4147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc827aaac91b424b6e12207a0d4d828"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a6cc827aaac91b424b6e12207a0d4d828">selector</a> (const struct dirent *de)</td></tr>
<tr class="memdesc:a6cc827aaac91b424b6e12207a0d4d828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter function used for scandir.  <a href="fuseops_8cc.html#a6cc827aaac91b424b6e12207a0d4d828">More...</a><br /></td></tr>
<tr class="separator:a6cc827aaac91b424b6e12207a0d4d828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3cfd3d7f187bfe4077b7f7f4708da3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a9a3cfd3d7f187bfe4077b7f7f4708da3">scandir</a> (const char *dirp, std::vector&lt; struct dirent &gt; *_namelist, int(*<a class="el" href="fuseops_8cc.html#a6cc827aaac91b424b6e12207a0d4d828">selector</a>)(const struct dirent *), int(*cmp)(const struct dirent **, const struct dirent **))</td></tr>
<tr class="memdesc:a9a3cfd3d7f187bfe4077b7f7f4708da3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the directory dirp Works exactly like the scandir(3) function, the only difference is that it returns the result in a std:vector.  <a href="fuseops_8cc.html#a9a3cfd3d7f187bfe4077b7f7f4708da3">More...</a><br /></td></tr>
<tr class="separator:a9a3cfd3d7f187bfe4077b7f7f4708da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91259ded64f438cd678908b2c9061f65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a91259ded64f438cd678908b2c9061f65">find_original</a> (const std::string &amp;origpath)</td></tr>
<tr class="memdesc:a91259ded64f438cd678908b2c9061f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the destination (post-transcode) file name, determine the parent of the file to be transcoded.  <a href="fuseops_8cc.html#a91259ded64f438cd678908b2c9061f65">More...</a><br /></td></tr>
<tr class="separator:a91259ded64f438cd678908b2c9061f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a7ad0a9782c3231049be5c9c9b22542a7">find_original</a> (std::string *filepath)</td></tr>
<tr class="memdesc:a7ad0a9782c3231049be5c9c9b22542a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the destination (post-transcode) file name, determine the name of the original file to be transcoded.  <a href="fuseops_8cc.html#a7ad0a9782c3231049be5c9c9b22542a7">More...</a><br /></td></tr>
<tr class="separator:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1169e3490bc783aed6623f74d1fba031"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a1169e3490bc783aed6623f74d1fba031">find_parent</a> (const std::string &amp;origpath)</td></tr>
<tr class="memdesc:a1169e3490bc783aed6623f74d1fba031"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the destination (post-transcode) file name, determine the parent of the file to be transcoded.  <a href="fuseops_8cc.html#a1169e3490bc783aed6623f74d1fba031">More...</a><br /></td></tr>
<tr class="separator:a1169e3490bc783aed6623f74d1fba031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b9db4444cc84b796a0e6dd95c64684"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ab0b9db4444cc84b796a0e6dd95c64684">add_fuse_entry</a> (void *buf, fuse_fill_dir_t filler, const char *name, const struct stat *stbuf, off_t off)</td></tr>
<tr class="memdesc:ab0b9db4444cc84b796a0e6dd95c64684"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to the Fuse filler function.  <a href="fuseops_8cc.html#ab0b9db4444cc84b796a0e6dd95c64684">More...</a><br /></td></tr>
<tr class="separator:ab0b9db4444cc84b796a0e6dd95c64684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b72338352a37192db01c6a43b67a5be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a1b72338352a37192db01c6a43b67a5be">add_dotdot</a> (void *buf, fuse_fill_dir_t filler, const struct stat *stbuf, off_t off)</td></tr>
<tr class="memdesc:a1b72338352a37192db01c6a43b67a5be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the ./.. entries for a virtual directory.  <a href="fuseops_8cc.html#a1b72338352a37192db01c6a43b67a5be">More...</a><br /></td></tr>
<tr class="separator:a1b72338352a37192db01c6a43b67a5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac2604c2c1564dcbdc72341d3af4e772a"><td class="memItemLeft" align="right" valign="top"><a id="ac2604c2c1564dcbdc72341d3af4e772a"></a>
static <a class="el" href="fuseops_8cc.html#ae586c5090d2e2c9105075061b0b8c6e9">FILENAME_MAP</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ac2604c2c1564dcbdc72341d3af4e772a">filenames</a></td></tr>
<tr class="memdesc:ac2604c2c1564dcbdc72341d3af4e772a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map files to virtual files. <br /></td></tr>
<tr class="separator:ac2604c2c1564dcbdc72341d3af4e772a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44017e60d131194400a8f961f6295207"><td class="memItemLeft" align="right" valign="top"><a id="a44017e60d131194400a8f961f6295207"></a>
static std::vector&lt; char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a44017e60d131194400a8f961f6295207">script_file</a></td></tr>
<tr class="memdesc:a44017e60d131194400a8f961f6295207"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classBuffer.html" title="The Buffer class.">Buffer</a> for the virtual script if enabled. <br /></td></tr>
<tr class="separator:a44017e60d131194400a8f961f6295207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751f2746b37ca950207ec5d4f904adf8"><td class="memItemLeft" align="right" valign="top"><a id="a751f2746b37ca950207ec5d4f904adf8"></a>
static struct sigaction&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a751f2746b37ca950207ec5d4f904adf8">oldHandler</a></td></tr>
<tr class="memdesc:a751f2746b37ca950207ec5d4f904adf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves old SIGINT handler to restore on shutdown. <br /></td></tr>
<tr class="separator:a751f2746b37ca950207ec5d4f904adf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b39fa2e63b932fe5186f777a7c31078"><td class="memItemLeft" align="right" valign="top"><a id="a4b39fa2e63b932fe5186f777a7c31078"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a4b39fa2e63b932fe5186f777a7c31078">docker_client</a></td></tr>
<tr class="memdesc:a4b39fa2e63b932fe5186f777a7c31078"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if running inside a Docker container. <br /></td></tr>
<tr class="separator:a4b39fa2e63b932fe5186f777a7c31078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20127960d0a961494a0a56d119d885a9"><td class="memItemLeft" align="right" valign="top">fuse_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a20127960d0a961494a0a56d119d885a9">ffmpegfs_ops</a></td></tr>
<tr class="memdesc:a20127960d0a961494a0a56d119d885a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">FUSE file system operations.  <a href="fuseops_8cc.html#a20127960d0a961494a0a56d119d885a9">More...</a><br /></td></tr>
<tr class="separator:a20127960d0a961494a0a56d119d885a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ac55205f0d0e96100cc45772501c7f"><td class="memItemLeft" align="right" valign="top"><a id="ab9ac55205f0d0e96100cc45772501c7f"></a>
<a class="el" href="classthread__pool.html">thread_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ab9ac55205f0d0e96100cc45772501c7f">tp</a></td></tr>
<tr class="memdesc:ab9ac55205f0d0e96100cc45772501c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread pool object. <br /></td></tr>
<tr class="separator:ab9ac55205f0d0e96100cc45772501c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e6179f1064980bec863d36c8afe89c"><td class="memItemLeft" align="right" valign="top">static const std::list&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a94e6179f1064980bec863d36c8afe89c">passthrough_map</a></td></tr>
<tr class="separator:a94e6179f1064980bec863d36c8afe89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Fuse operations implementation. </p>
<dl class="section author"><dt>Author</dt><dd>Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2006-2008 David Collett <br  />
Copyright (C) 2008-2013 K. Henriksson <br  />
Copyright (C) 2017-2022 FFmpeg support by Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1b72338352a37192db01c6a43b67a5be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b72338352a37192db01c6a43b67a5be">&#9670;&nbsp;</a></span>add_dotdot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_dotdot </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the ./.. entries for a virtual directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- The buffer passed to the readdir() operation. May be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Function pointer to the Fuse update function. May be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- File attributes, can be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">off</td><td>- Offset of the next entry or zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if buffer is full, zero otherwise or if buf or filler is nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02230">2230</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l02220">add_fuse_entry()</a>, and <a class="el" href="fuseops_8cc_source.html#l00261">init_stat()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00626">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00163">check_vcd()</a>, and <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>.</p>

</div>
</div>
<a id="ab0b9db4444cc84b796a0e6dd95c64684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b9db4444cc84b796a0e6dd95c64684">&#9670;&nbsp;</a></span>add_fuse_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_fuse_entry </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper to the Fuse filler function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- The buffer passed to the readdir() operation. May be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Function pointer to the Fuse update function. May be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>- The file name of the directory entry. Do not include the path! </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- File attributes, can be nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">off</td><td>- Offset of the next entry or zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if buffer is full, zero otherwise or if buf or filler is nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02220">2220</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l02230">add_dotdot()</a>, <a class="el" href="blurayparser_8cc_source.html#l00433">create_bluray_virtualfile()</a>, <a class="el" href="dvdparser_8cc_source.html#l00243">create_dvd_virtualfile()</a>, <a class="el" href="vcdparser_8cc_source.html#l00059">create_vcd_virtualfile()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, <a class="el" href="fuseops_8cc_source.html#l00560">load_path()</a>, and <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>.</p>

</div>
</div>
<a id="aaccd4c147efa346efcbb3c4fbb1e0a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaccd4c147efa346efcbb3c4fbb1e0a1a">&#9670;&nbsp;</a></span>check_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path to parse. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if path was found; false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00553">553</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00090">filenames</a>, and <a class="el" href="fuseops_8cc_source.html#l00450">find_prefix()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00626">check_bluray()</a>, <a class="el" href="cuesheetparser_8cc_source.html#l00407">check_cuesheet()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, and <a class="el" href="vcdparser_8cc_source.html#l00163">check_vcd()</a>.</p>

</div>
</div>
<a id="a95f5abb75c59040d697f629d27a7eee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f5abb75c59040d697f629d27a7eee8">&#9670;&nbsp;</a></span>ffmpegfs_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffmpegfs_destroy </td>
          <td>(</td>
          <td class="paramtype">__attribute__((unused)) void *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean up filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>- unused </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02180">2180</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8h_source.html#l00042">FFMPEFS_VERSION</a>, <a class="el" href="logging_8h_source.html#l00211">Logging::info()</a>, <a class="el" href="fuseops_8cc_source.html#l00091">script_file</a>, <a class="el" href="cache__maintenance_8cc_source.html#l00342">stop_cache_maintenance()</a>, <a class="el" href="thread__pool_8cc_source.html#l00142">thread_pool::tear_down()</a>, <a class="el" href="fuseops_8cc_source.html#l00099">tp</a>, <a class="el" href="transcode_8cc_source.html#l00722">transcoder_exit()</a>, and <a class="el" href="transcode_8cc_source.html#l00236">transcoder_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a1000cf42094a79b839894b46f5fc4c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1000cf42094a79b839894b46f5fc4c7b">&#9670;&nbsp;</a></span>ffmpegfs_fgetattr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_fgetattr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get attributes from an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01599">1599</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00257">Logging::error()</a>, <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02346">stat_set_size()</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00712">transcoder_buffer_watermark()</a>, <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00108">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00113">VIRTUALFLAG_HIDDEN</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00098">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00101">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>, <a class="el" href="fileio_8h_source.html#l00095">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00088">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00092">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a823061cda8036c46d185b5edd62bf770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a823061cda8036c46d185b5edd62bf770">&#9670;&nbsp;</a></span>ffmpegfs_getattr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_getattr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get file attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- <a class="el" href="classBuffer.html" title="The Buffer class.">Buffer</a> to store information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>
<p>&lt; </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>Calculate correct file size for frame image in set </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01283">1283</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00983">append_sep()</a>, <a class="el" href="blurayparser_8cc_source.html#l00626">check_bluray()</a>, <a class="el" href="cuesheetparser_8cc_source.html#l00407">check_cuesheet()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00163">check_vcd()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="logging_8h_source.html#l00188">Logging::debug()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00071">ffmpeg_format</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00903">FFmpegfs_Format::fileext()</a>, <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="fuseops_8cc_source.html#l00782">find_parent()</a>, <a class="el" href="fuseops_8cc_source.html#l00833">get_source_properties()</a>, <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00918">FFmpegfs_Format::is_frameset()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00923">FFmpegfs_Format::is_hls()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00913">FFmpegfs_Format::is_multiformat()</a>, <a class="el" href="fileio_8h_source.html#l00142">VIRTUALFILE::m_destfile</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00143">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00148">VIRTUALFILE::m_predicted_size</a>, <a class="el" href="fileio_8h_source.html#l00144">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="fileio_8h_source.html#l00149">VIRTUALFILE::m_video_frame_count</a>, <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02032">make_filename()</a>, <a class="el" href="fuseops_8cc_source.html#l00856">make_hls_fileset()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01012">remove_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02346">stat_set_size()</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="fuseops_8cc_source.html#l00380">transcoded_name()</a>, <a class="el" href="transcode_8cc_source.html#l00248">transcoder_cached_filesize()</a>, <a class="el" href="transcode_8cc_source.html#l00702">transcoder_delete()</a>, <a class="el" href="transcode_8cc_source.html#l00707">transcoder_get_size()</a>, <a class="el" href="transcode_8cc_source.html#l00340">transcoder_new()</a>, <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00112">VIRTUALFLAG_CUESHEET</a>, <a class="el" href="fileio_8h_source.html#l00108">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00113">VIRTUALFLAG_HIDDEN</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00106">VIRTUALFLAG_NONE</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00098">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00101">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>, <a class="el" href="fileio_8h_source.html#l00095">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00088">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00092">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aa7d57eecd770c51ee5af839fe0c0f88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d57eecd770c51ee5af839fe0c0f88f">&#9670;&nbsp;</a></span>ffmpegfs_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * ffmpegfs_init </td>
          <td>(</td>
          <td class="paramtype">struct fuse_conn_info *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>- fuse_conn_info structure of FUSE. See FUSE docs for details. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nullptr </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02131">2131</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00095">docker_client</a>, <a class="el" href="ffmpeg__utils_8h_source.html#l00042">FFMPEFS_VERSION</a>, <a class="el" href="logging_8h_source.html#l00211">Logging::info()</a>, <a class="el" href="thread__pool_8cc_source.html#l00127">thread_pool::init()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00175">FFMPEGFS_PARAMS::m_basepath</a>, <a class="el" href="ffmpegfs_8h_source.html#l00228">FFMPEGFS_PARAMS::m_cache_maintenance</a>, <a class="el" href="ffmpegfs_8h_source.html#l00210">FFMPEGFS_PARAMS::m_enablescript</a>, <a class="el" href="ffmpegfs_8h_source.html#l00231">FFMPEGFS_PARAMS::m_max_threads</a>, <a class="el" href="ffmpegfs_8h_source.html#l00176">FFMPEGFS_PARAMS::m_mountpath</a>, <a class="el" href="fuseops_8cc_source.html#l00093">oldHandler</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="fuseops_8cc_source.html#l00316">prepare_script()</a>, <a class="el" href="fuseops_8cc_source.html#l02110">sighandler()</a>, <a class="el" href="cache__maintenance_8cc_source.html#l00330">start_cache_maintenance()</a>, and <a class="el" href="fuseops_8cc_source.html#l00099">tp</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a7cfbbef8bf8b2532fc79e42376cb6450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfbbef8bf8b2532fc79e42376cb6450">&#9670;&nbsp;</a></span>ffmpegfs_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File open operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01752">1752</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="fuseops_8cc_source.html#l00782">find_parent()</a>, <a class="el" href="fuseops_8cc_source.html#l01717">kick_next()</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00340">transcoder_new()</a>, <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00098">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00101">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>, <a class="el" href="fileio_8h_source.html#l00095">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00088">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00092">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a0ef0ba435c786787e54896e4d4613dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef0ba435c786787e54896e4d4613dfe">&#9670;&nbsp;</a></span>ffmpegfs_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01875">1875</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00257">Logging::error()</a>, <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="fuseops_8cc_source.html#l02208">get_number()</a>, <a class="el" href="fileio_8h_source.html#l00151">VIRTUALFILE::m_file_contents</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00456">transcoder_read()</a>, <a class="el" href="transcode_8cc_source.html#l00587">transcoder_read_frame()</a>, <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00098">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00101">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>, <a class="el" href="fileio_8h_source.html#l00095">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00088">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00092">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a6c0c07bc6805650f5da69fc23258cc51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0c07bc6805650f5da69fc23258cc51">&#9670;&nbsp;</a></span>ffmpegfs_readdir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_readdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Physical path to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>
<p>&lt; </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd>Calculate correct file size for frame image in set </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01009">1009</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l02230">add_dotdot()</a>, <a class="el" href="fuseops_8cc_source.html#l02220">add_fuse_entry()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00983">append_sep()</a>, <a class="el" href="blurayparser_8cc_source.html#l00626">check_bluray()</a>, <a class="el" href="cuesheetparser_8cc_source.html#l00407">check_cuesheet()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00163">check_vcd()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="logging_8h_source.html#l00188">Logging::debug()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01143">ffmpeg_geterror()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00903">FFmpegfs_Format::fileext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01071">find_ext()</a>, <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01173">get_media_type_string()</a>, <a class="el" href="fuseops_8cc_source.html#l00833">get_source_properties()</a>, <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00918">FFmpegfs_Format::is_frameset()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00923">FFmpegfs_Format::is_hls()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00913">FFmpegfs_Format::is_multiformat()</a>, <a class="el" href="fuseops_8cc_source.html#l00560">load_path()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00210">FFMPEGFS_PARAMS::m_enablescript</a>, <a class="el" href="fileio_8h_source.html#l00151">VIRTUALFILE::m_file_contents</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00148">VIRTUALFILE::m_predicted_size</a>, <a class="el" href="ffmpegfs_8h_source.html#l00182">FFMPEGFS_PARAMS::m_recodesame</a>, <a class="el" href="ffmpegfs_8h_source.html#l00211">FFMPEGFS_PARAMS::m_scriptfile</a>, <a class="el" href="fileio_8h_source.html#l00144">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="fileio_8h_source.html#l00149">VIRTUALFILE::m_video_frame_count</a>, <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02032">make_filename()</a>, <a class="el" href="fuseops_8cc_source.html#l00856">make_hls_fileset()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="ffmpeg__utils_8h_source.html#l00236">RECODESAME_YES</a>, <a class="el" href="fuseops_8cc_source.html#l00091">script_file</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="fuseops_8cc_source.html#l00380">transcoded_name()</a>, <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00933">FFmpegfs_Format::video_codec()</a>, <a class="el" href="fileio_8h_source.html#l00112">VIRTUALFLAG_CUESHEET</a>, <a class="el" href="fileio_8h_source.html#l00108">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, <a class="el" href="fileio_8h_source.html#l00113">VIRTUALFLAG_HIDDEN</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>, <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="logging_8h_source.html#l00234">Logging::warning()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aa62555502b0803b643078ab86ba4202e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62555502b0803b643078ab86ba4202e">&#9670;&nbsp;</a></span>ffmpegfs_readlink()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_readlink </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the target of a symbolic link. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00799">799</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="fuseops_8cc_source.html#l00380">transcoded_name()</a>, and <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a3b6a5a4b01296278169ca568d5875cf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6a5a4b01296278169ca568d5875cf8">&#9670;&nbsp;</a></span>ffmpegfs_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_release </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02072">2072</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="buffer_8h_source.html#l00049">CACHE_FLAG_RO</a>, <a class="el" href="buffer_8cc_source.html#l00126">Buffer::close_file()</a>, <a class="el" href="logging_8h_source.html#l00257">Logging::error()</a>, <a class="el" href="fuseops_8cc_source.html#l02208">get_number()</a>, <a class="el" href="cache__entry_8h_source.html#l00264">Cache_Entry::m_buffer</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00702">transcoder_delete()</a>, <a class="el" href="cache__entry_8cc_source.html#l00401">Cache_Entry::virtualfile()</a>, and <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aaea4779d4bb43472f16f47d7376a6e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea4779d4bb43472f16f47d7376a6e40">&#9670;&nbsp;</a></span>ffmpegfs_statfs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_statfs </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct statvfs *&#160;</td>
          <td class="paramname"><em>stbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get file system statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02038">2038</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="logging_8h_source.html#l00165">Logging::trace()</a>, and <a class="el" href="fuseops_8cc_source.html#l00363">translate_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a06ace4961a810d54562267ade0f83f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ace4961a810d54562267ade0f83f6b">&#9670;&nbsp;</a></span>find_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find file in cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfile</td><td>- Virtual filename and path of file to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If found, returns <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object, if not found returns nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00540">540</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00090">filenames</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01940">sanitise_filepath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cuesheetparser_8cc_source.html#l00407">check_cuesheet()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="ffmpeg__transcoder_8cc_source.html#l06060">FFmpeg_Transcoder::encode_finish()</a>, and <a class="el" href="fuseops_8cc_source.html#l00701">find_original()</a>.</p>

</div>
</div>
<a id="a91259ded64f438cd678908b2c9061f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91259ded64f438cd678908b2c9061f65">&#9670;&nbsp;</a></span>find_original() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_original </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origpath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the destination (post-transcode) file name, determine the parent of the file to be transcoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">origpath</td><td>- The original file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns contstant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00695">695</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01599">ffmpegfs_fgetattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01752">ffmpegfs_open()</a>, <a class="el" href="fuseops_8cc_source.html#l01875">ffmpegfs_read()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, <a class="el" href="fuseops_8cc_source.html#l00799">ffmpegfs_readlink()</a>, <a class="el" href="fuseops_8cc_source.html#l02038">ffmpegfs_statfs()</a>, <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, and <a class="el" href="fuseops_8cc_source.html#l00782">find_parent()</a>.</p>

</div>
</div>
<a id="a7ad0a9782c3231049be5c9c9b22542a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad0a9782c3231049be5c9c9b22542a7">&#9670;&nbsp;</a></span>find_original() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_original </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>filepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the destination (post-transcode) file name, determine the name of the original file to be transcoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filepath</td><td>- Input the original file, output name of transcoded file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns contstant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>
<p>&lt;* </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>This probably won't work, need to redo "Fallback to old method" </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00701">701</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00993">append_filename()</a>, <a class="el" href="logging_8h_source.html#l00257">Logging::error()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00071">ffmpeg_format</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01071">find_ext()</a>, <a class="el" href="fuseops_8cc_source.html#l00540">find_file()</a>, <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>, <a class="el" href="fileio_8h_source.html#l00143">VIRTUALFILE::m_origfile</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01043">remove_ext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01012">remove_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01028">remove_path()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01940">sanitise_filepath()</a>, <a class="el" href="fuseops_8cc_source.html#l00675">scandir()</a>, <a class="el" href="fuseops_8cc_source.html#l00651">selector()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00144">FFMPEGFS_PARAMS::smart_transcode()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01803">strcasecmp()</a>, <a class="el" href="fileio_8h_source.html#l00107">VIRTUALFLAG_PASSTHROUGH</a>, and <a class="el" href="fileio_8h_source.html#l00089">VIRTUALTYPE_DISK</a>.</p>

</div>
</div>
<a id="a1169e3490bc783aed6623f74d1fba031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1169e3490bc783aed6623f74d1fba031">&#9670;&nbsp;</a></span>find_parent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_parent </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origpath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the destination (post-transcode) file name, determine the parent of the file to be transcoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">origpath</td><td>- The original file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns contstant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00782">782</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00695">find_original()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01012">remove_filename()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01002">remove_sep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, and <a class="el" href="fuseops_8cc_source.html#l01752">ffmpegfs_open()</a>.</p>

</div>
</div>
<a id="a6170253fb38784430b1fc2d0ffce74dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6170253fb38784430b1fc2d0ffce74dc">&#9670;&nbsp;</a></span>find_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FILENAME_MAP::const_iterator find_prefix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="fuseops_8cc.html#ae586c5090d2e2c9105075061b0b8c6e9">FILENAME_MAP</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>search_for</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find mapped file by prefix. Normally used to find a path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>- File map with virtual files. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">search_for</td><td>- Prefix (path) to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If found, returns const_iterator to map entry. Returns map.cend() if not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00450">450</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00553">check_path()</a>.</p>

</div>
</div>
<a id="aba36c9d61873d571f862ab1952a43fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba36c9d61873d571f862ab1952a43fe5">&#9670;&nbsp;</a></span>get_number()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string get_number </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract the number for a file name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>- Path and filename of requested file </td></tr>
    <tr><td class="paramname">value</td><td>- Returns the number extracted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the filename that was processed, without path. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02208">2208</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l01028">remove_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01875">ffmpegfs_read()</a>, and <a class="el" href="fuseops_8cc_source.html#l02072">ffmpegfs_release()</a>.</p>

</div>
</div>
<a id="a9676a5e6a30d145619a678d896b6a3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9676a5e6a30d145619a678d896b6a3d8">&#9670;&nbsp;</a></span>get_source_properties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_source_properties </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td>
          <td class="paramname"><em>virtualfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the video frame count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">origpath</td><td>- Path of original file. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">virtualfile</td><td>- Virtual file object to modify. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00833">833</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00188">Logging::debug()</a>, <a class="el" href="fileio_8cc_source.html#l00048">VIRTUALFILE::get_segment_count()</a>, <a class="el" href="fileio_8h_source.html#l00147">VIRTUALFILE::m_duration</a>, <a class="el" href="fileio_8h_source.html#l00149">VIRTUALFILE::m_video_frame_count</a>, <a class="el" href="transcode_8cc_source.html#l00702">transcoder_delete()</a>, and <a class="el" href="transcode_8cc_source.html#l00340">transcoder_new()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, and <a class="el" href="fuseops_8cc_source.html#l00856">make_hls_fileset()</a>.</p>

</div>
</div>
<a id="a5aedf36ce797b833313a1e453f10260d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aedf36ce797b833313a1e453f10260d">&#9670;&nbsp;</a></span>init_stat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_stat </td>
          <td>(</td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>ftime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise a stat structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- struct stat to fill in. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fsize</td><td>- size of the corresponding file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ftime</td><td>- File time (creation/modified/access) of the corresponding file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>- If true, the structure is set up for a directory. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00261">261</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l02346">stat_set_size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l02230">add_dotdot()</a>, and <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>.</p>

</div>
</div>
<a id="a17d4c12a4097e21fada1f6c9c57f6879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d4c12a4097e21fada1f6c9c57f6879">&#9670;&nbsp;</a></span>insert_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_dir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="fileio_8h.html#ab2033d1ee76d555f1673f6139b27d865">VIRTUALFLAG_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual directory to internal list. If the file already exists, it will be updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtdir</td><td>- Name of virtual directory. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- stat buffer with file size, time etc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- One of the VIRTUALFLAG_* flags to control the detailed behaviour. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00510">510</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00983">append_sep()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00071">ffmpeg_format</a>, <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>, <a class="el" href="fileio_8h_source.html#l00108">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00109">VIRTUALFLAG_FILESET</a>, <a class="el" href="fileio_8h_source.html#l00110">VIRTUALFLAG_FRAME</a>, and <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00433">create_bluray_virtualfile()</a>, <a class="el" href="cuesheetparser_8cc_source.html#l00122">create_cuesheet_virtualfile()</a>, <a class="el" href="dvdparser_8cc_source.html#l00243">create_dvd_virtualfile()</a>, <a class="el" href="vcdparser_8cc_source.html#l00059">create_vcd_virtualfile()</a>, and <a class="el" href="cuesheetparser_8cc_source.html#l00255">parse_cuesheet()</a>.</p>

</div>
</div>
<a id="a00e8e3c01bbf6eaebf4ebce268e9ad10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00e8e3c01bbf6eaebf4ebce268e9ad10">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="fileio_8h.html#ab2033d1ee76d555f1673f6139b27d865">VIRTUALFLAG_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. If the file already exists, it will be updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfile</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origfile</td><td>- Original file name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- stat buffer with file size, time etc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- One of the VIRTUALFLAG_* flags to control the detailed behaviour. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00469">469</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00090">filenames</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00149">FFMPEGFS_PARAMS::guess_format_idx()</a>, <a class="el" href="fileio_8h_source.html#l00142">VIRTUALFILE::m_destfile</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00141">VIRTUALFILE::m_format_idx</a>, <a class="el" href="fileio_8h_source.html#l00143">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00144">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01940">sanitise_filepath()</a>.</p>

</div>
</div>
<a id="abbdbaa20604e099c230f6a18bae4c0ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdbaa20604e099c230f6a18bae4c0ff">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code><a class="el" href="fileio_8h.html#ab2033d1ee76d555f1673f6139b27d865">VIRTUALFLAG_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. </p>
<p>For Bluray/DVD/VCD actually no physical input file exists, so virtual file and origfile are the same. The input file is handled by the <a class="el" href="classBlurayIO.html" title="Bluray I/O class.">BlurayIO</a> or <a class="el" href="classVcdIO.html" title="Video CD and Super Video CD I/O class.">VcdIO</a> classes. For cue sheets, the original (huge) input file is used. Start positions are sought, end positions reported as EOF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfile</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- stat buffer with file size, time etc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- One of the VIRTUALFLAG_* flags to control the detailed behaviour. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00464">464</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00433">create_bluray_virtualfile()</a>, <a class="el" href="cuesheetparser_8cc_source.html#l00122">create_cuesheet_virtualfile()</a>, <a class="el" href="dvdparser_8cc_source.html#l00243">create_dvd_virtualfile()</a>, <a class="el" href="vcdparser_8cc_source.html#l00059">create_vcd_virtualfile()</a>, <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, <a class="el" href="fuseops_8cc_source.html#l00701">find_original()</a>, <a class="el" href="fuseops_8cc_source.html#l00510">insert_dir()</a>, <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>, and <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>.</p>

</div>
</div>
<a id="ac422769b0b726d7438d3e0f39eebf00f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac422769b0b726d7438d3e0f39eebf00f">&#9670;&nbsp;</a></span>kick_next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int kick_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td>
          <td class="paramname"><em>virtualfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Give next song in cuesheet list a kick start Starts transcoding of the next song on the cuesheet list to ensure a somewhat gapless start when the current song finishes. Next song can be played from cache and start faster then. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>Will work only if transcoding finishes within timeout. Probably remove or raise timeout here. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualfile</td><td>- <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of current song </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01717">1717</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00188">Logging::debug()</a>, <a class="el" href="structVIRTUALFILE.html#afd9a0cb11263d27d5cafa241ee62a8ec">VIRTUALFILE::m_cuesheet</a>, <a class="el" href="fileio_8h_source.html#l00142">VIRTUALFILE::m_destfile</a>, <a class="el" href="fileio_8h_source.html#l00228">VIRTUALFILE::CUESHEET_TRACK::m_nextfile</a>, <a class="el" href="transcode_8cc_source.html#l00702">transcoder_delete()</a>, and <a class="el" href="transcode_8cc_source.html#l00340">transcoder_new()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01752">ffmpegfs_open()</a>.</p>

</div>
</div>
<a id="a757570119497576827529b07c0aa4147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757570119497576827529b07c0aa4147">&#9670;&nbsp;</a></span>load_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a path with virtual files for FUSE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Physical path to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">statbuf</td><td>- stat buffer to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns number of files found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00560">560</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l02220">add_fuse_entry()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00903">FFmpegfs_Format::fileext()</a>, <a class="el" href="fuseops_8cc_source.html#l00090">filenames</a>, <a class="el" href="fileio_8h_source.html#l00142">VIRTUALFILE::m_destfile</a>, <a class="el" href="fileio_8h_source.html#l00139">VIRTUALFILE::m_flags</a>, <a class="el" href="fileio_8h_source.html#l00144">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="buffer_8cc_source.html#l00920">Buffer::make_cachefile_name()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01012">remove_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01028">remove_path()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01002">remove_sep()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02346">stat_set_size()</a>, <a class="el" href="fileio_8h_source.html#l00112">VIRTUALFLAG_CUESHEET</a>, <a class="el" href="fileio_8h_source.html#l00108">VIRTUALFLAG_DIRECTORY</a>, <a class="el" href="fileio_8h_source.html#l00098">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00095">VIRTUALTYPE_DVD</a>, and <a class="el" href="fileio_8h_source.html#l00092">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00626">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00163">check_vcd()</a>, and <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>.</p>

</div>
</div>
<a id="afa158bbaa07a77c484263bac4acc08f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa158bbaa07a77c484263bac4acc08f7">&#9670;&nbsp;</a></span>make_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> make_file </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>ftime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a virtual file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origpath</td><td>- Original path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- On of the VIRTUALFLAG_ macros. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fsize</td><td>- Size of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ftime</td><td>- Time of virtual file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition.">VIRTUALFILE</a> object of file. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00299">299</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l02220">add_fuse_entry()</a>, <a class="el" href="fuseops_8cc_source.html#l00261">init_stat()</a>, and <a class="el" href="fuseops_8cc_source.html#l00464">insert_file()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, and <a class="el" href="fuseops_8cc_source.html#l00856">make_hls_fileset()</a>.</p>

</div>
</div>
<a id="a9b4cd45ac66c23edfc4e8668dd7446a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4cd45ac66c23edfc4e8668dd7446a2">&#9670;&nbsp;</a></span>make_hls_fileset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int make_hls_fileset </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td>
          <td class="paramname"><em>virtualfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a virtual HLS file set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>- The buffer passed to the readdir() operation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filler</td><td>- Function to add an entry in a readdir() operation (see <a href="https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660">https://libfuse.github.io/doxygen/fuse_8h.html#a7dd132de66a5cc2add2a4eff5d435660</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origpath</td><td>- The original file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtualfile</td><td>- LPCVIRTUALFILE of file to create file set for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00856">856</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00903">FFmpegfs_Format::fileext()</a>, <a class="el" href="fileio_8cc_source.html#l00048">VIRTUALFILE::get_segment_count()</a>, <a class="el" href="fuseops_8cc_source.html#l00833">get_source_properties()</a>, <a class="el" href="fileio_8h_source.html#l00147">VIRTUALFILE::m_duration</a>, <a class="el" href="fileio_8h_source.html#l00151">VIRTUALFILE::m_file_contents</a>, <a class="el" href="fileio_8h_source.html#l00148">VIRTUALFILE::m_predicted_size</a>, <a class="el" href="ffmpegfs_8h_source.html#l00197">FFMPEGFS_PARAMS::m_segment_duration</a>, <a class="el" href="fileio_8h_source.html#l00144">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00138">VIRTUALFILE::m_type</a>, <a class="el" href="buffer_8cc_source.html#l00920">Buffer::make_cachefile_name()</a>, <a class="el" href="fuseops_8cc_source.html#l00299">make_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l02032">make_filename()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01002">remove_sep()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01809">strsprintf()</a>, <a class="el" href="fileio_8h_source.html#l00111">VIRTUALFLAG_HLS</a>, <a class="el" href="fileio_8h_source.html#l00106">VIRTUALFLAG_NONE</a>, and <a class="el" href="fileio_8h_source.html#l00090">VIRTUALTYPE_SCRIPT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, and <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>.</p>

</div>
</div>
<a id="a9a3cfd3d7f187bfe4077b7f7f4708da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a3cfd3d7f187bfe4077b7f7f4708da3">&#9670;&nbsp;</a></span>scandir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int scandir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; struct dirent &gt; *&#160;</td>
          <td class="paramname"><em>_namelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(const struct dirent *)&#160;</td>
          <td class="paramname"><em>selector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(const struct dirent **, const struct dirent **)&#160;</td>
          <td class="paramname"><em>cmp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans the directory dirp Works exactly like the scandir(3) function, the only difference is that it returns the result in a std:vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dirp</td><td>- Directory to be searched. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_namelist</td><td>- Returns the list of files found </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">selector</td><td>- Entries for which <a class="el" href="fuseops_8cc.html#a6cc827aaac91b424b6e12207a0d4d828" title="Filter function used for scandir.">selector()</a> returns nonzero are stored in _namelist </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmp</td><td>- Entries are sorted using qsort(3) with the comparison function cmp(). May be nullptr for no sort. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of directory entries selected. On error, -1 is returned, with errno set to indicate the error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00675">675</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00651">selector()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00701">find_original()</a>.</p>

</div>
</div>
<a id="a6cc827aaac91b424b6e12207a0d4d828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc827aaac91b424b6e12207a0d4d828">&#9670;&nbsp;</a></span>selector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int selector </td>
          <td>(</td>
          <td class="paramtype">const struct dirent *&#160;</td>
          <td class="paramname"><em>de</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter function used for scandir. </p>
<p>Selects files only that can be processed with FFmpeg API.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">de</td><td>- dirent to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nonzero if dirent matches, 0 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00651">651</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00701">find_original()</a>, and <a class="el" href="fuseops_8cc_source.html#l00675">scandir()</a>.</p>

</div>
</div>
<a id="a8c3b11e8f6bdd36ec82e5332c667ea7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c3b11e8f6bdd36ec82e5332c667ea7b">&#9670;&nbsp;</a></span>sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replacement SIGINT handler. </p>
<p>FUSE handles SIGINT internally, but because there are extra threads running while transcoding this mechanism does not properly work. We implement our own SIGINT handler to ensure proper shutdown of all threads. Next we restore the original handler and dispatch the signal to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signum</td><td>- Signal to handle. Must be SIGINT. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l02110">2110</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00093">oldHandler</a>, <a class="el" href="transcode_8cc_source.html#l00722">transcoder_exit()</a>, and <a class="el" href="logging_8h_source.html#l00234">Logging::warning()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l02131">ffmpegfs_init()</a>.</p>

</div>
</div>
<a id="acba2f69b5cad51dfdad024c9efccb684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba2f69b5cad51dfdad024c9efccb684">&#9670;&nbsp;</a></span>transcoded_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool transcoded_name </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFFmpegfs__Format.html">FFmpegfs_Format</a> **&#160;</td>
          <td class="paramname"><em>current_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert file name from source to destination name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filepath</td><td>- Name of source file, will be changed to destination name. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">current_format</td><td>- If format has been found points to format info, nullptr if not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if format has been found and filename changed, false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00380">380</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l01057">allow_list_ext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01113">append_ext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00948">FFmpegfs_Format::audio_codec()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00179">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00071">ffmpeg_format</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01071">find_ext()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00190">FFMPEGFS_PARAMS::m_extensions</a>, <a class="el" href="ffmpegfs_8h_source.html#l00235">FFMPEGFS_PARAMS::m_oldnamescheme</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01992">nocasecompare()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, <a class="el" href="fuseops_8cc_source.html#l00110">passthrough_map</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01091">replace_ext()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00144">FFMPEGFS_PARAMS::smart_transcode()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l00933">FFmpegfs_Format::video_codec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, and <a class="el" href="fuseops_8cc_source.html#l00799">ffmpegfs_readlink()</a>.</p>

</div>
</div>
<a id="a66c48999dc2161a69398c5e44c777792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66c48999dc2161a69398c5e44c777792">&#9670;&nbsp;</a></span>translate_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void translate_path </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>origpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate file names from FUSE to the original absolute path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">origpath</td><td>- Upon return, contains the name and path of the original file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Filename and relative path of the original file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00363">363</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpegfs_8h_source.html#l00175">FFMPEGFS_PARAMS::m_basepath</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00072">params</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01940">sanitise_filepath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01599">ffmpegfs_fgetattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01283">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l01752">ffmpegfs_open()</a>, <a class="el" href="fuseops_8cc_source.html#l01875">ffmpegfs_read()</a>, <a class="el" href="fuseops_8cc_source.html#l01009">ffmpegfs_readdir()</a>, <a class="el" href="fuseops_8cc_source.html#l00799">ffmpegfs_readlink()</a>, and <a class="el" href="fuseops_8cc_source.html#l02038">ffmpegfs_statfs()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a20127960d0a961494a0a56d119d885a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20127960d0a961494a0a56d119d885a9">&#9670;&nbsp;</a></span>ffmpegfs_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fuse_operations ffmpegfs_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FUSE file system operations. </p>
<p>Fuse operations struct. </p>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00097">97</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00239">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a94e6179f1064980bec863d36c8afe89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94e6179f1064980bec863d36c8afe89c">&#9670;&nbsp;</a></span>passthrough_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::list&lt;std::string&gt; passthrough_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of passthrough file extensions</p>
<p>Note: Must be in ascending aplhabetical order for the binary_search function used on it to work! New elements must be inserted in the correct position, elements removed by simply deleting them from the list. </p>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00110">110</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00380">transcoded_name()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
